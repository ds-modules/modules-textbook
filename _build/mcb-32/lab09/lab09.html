---
interact_link: content/mcb-32/lab09/lab09.ipynb
kernel_name: python3
kernel_path: content/mcb-32/lab09
has_widgets: false
title: |-
  Lab 9
pagenum: 12
prev_page:
  url: /mcb-32/lab08/lab08.html
next_page:
  url: /psych-167ac/psych-167ac-intro.html
suffix: .ipynb
search: our data div alert diabetes test table below diabetic question between classifier above not section mean hypothesis class statistic set dataset those answer column cell into value testing info insulin function try sample difference patients here pregnancies outcome type group because lab measurements columns values np health just bloodpressure histogram

comment: "***PROGRAMMATICALLY GENERATED, DO NOT EDIT. SEE ORIGINAL FILES IN /content***"
---

    <main class="jupyter-page">
    <div id="page-info"></div>
    <div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="MCB-32:-Lab-09---Hypothesis-Testing-and-Diabetes-Classification">MCB 32: Lab 09 - Hypothesis Testing and Diabetes Classification<a class="anchor-link" href="#MCB-32:-Lab-09---Hypothesis-Testing-and-Diabetes-Classification"> </a></h1><hr>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="alert alert-warning"> 
<b> NOTE:</b> You will work in pairs for this lab and turn in one copy of the notebook for each pair. Write the names of the two people who worked on this notebook together in the box below.
</div>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Student #1: <strong>FIRST STUDENT</strong></p>
<p>Student #2: <strong>SECOND STUDENT</strong></p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Professor-Robin-Ball">Professor Robin Ball<a class="anchor-link" href="#Professor-Robin-Ball"> </a></h3>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In this lab, we will be exploring a data set on diabetes in an attempt to find out which health measurements are correlated the most with diabetic patients. After we establish the relationships between these measurments and diabetes, we will build a classifier that will, given a certain patient's health measurements, classify whether that patient has diabetes or not.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Table-of-Contents">Table of Contents<a class="anchor-link" href="#Table-of-Contents"> </a></h3><ol>
<li><a href="#section-1">The Setup</a></li>
<li><a href="#section-2">Exploring the Data</a></li>
<li><a href="#section-3">Hypothesis Testing</a><br>
&nbsp;&nbsp;&nbsp; a. <a href="#section-3a">The Bootstrap</a><br>
&nbsp;&nbsp;&nbsp; b. <a href="#section-3b">The Hypothesis Test</a><br></li>
<li><a href="#section-4">Conceptual Background</a></li>
<li><a href="#section-5">Building the Classifier</a></li>
<li><a href="#section-6">Testing the Classifier</a></li>
</ol>
<h3 id="Completing-the-Notebook">Completing the Notebook<a class="anchor-link" href="#Completing-the-Notebook"> </a></h3><div class="alert alert-info"> 

**QUESTION** cells are in blue and ask you to make graphs, answer conceptual questions, or do other lab tasks. To receive full credit for your lab, you must complete all **QUESTION** cells.

</div><p>To run a code cell once it's been selected,</p>
<ul>
<li>press Shift-Enter, or</li>
<li>click the Run button in the toolbar at the top of the screen. </li>
</ul>
<p>If a code cell is running, you will see an asterisk (*) appear in the square brackets to the left of the cell. Once the cell has finished running, a number will replace the asterisk and any output from the code will appear under the cell.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="1.-The-Setup">1. The Setup<a id="section-1" /><a class="anchor-link" href="#1.-The-Setup"> </a></h1>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The first thing we need to do is set up our environment so we can build tables and visualize the data, so just run the next cells.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">datascience</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">sklearn.neighbors</span> <span class="k">import</span> <span class="n">NearestNeighbors</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;fivethirtyeight&#39;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="ne">FutureWarning</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Then we will load in the data on the patients into a table in the next cell.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It is important to understand what the information inside of our table is, such as the columns, rows and individual entries. Each row corresponds to a particular patient and the health measurements that, that patient had recorded druring the gathering of the data. As a reminder, here is a breakdown of the columns in our table.</p>
<table>
<thead><tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pregnancies</td>
<td>The number of pregnancies the patient has had</td>
</tr>
<tr>
<td>Glucose</td>
<td>Plasma glucose concentration 2 hours after the oral glucose tolerance test</td>
</tr>
<tr>
<td>BloodPressure</td>
<td>Diastolic Blood Pressure (mm Hg)</td>
</tr>
<tr>
<td>SkinThickness</td>
<td>Triceps skin fold thickness (mm)</td>
</tr>
<tr>
<td>Insulin</td>
<td>2-hour serum insulin</td>
</tr>
<tr>
<td>BMI</td>
<td>Body mass index (weight in kg/(heigth in meters)^2)</td>
</tr>
<tr>
<td>DiabetesPedigreeFunction</td>
<td>A function which extrapolates the genetic risk a patient has of getting diabetes based on history of the disease in family/relatives</td>
</tr>
<tr>
<td>Age</td>
<td>Age of patient (years)</td>
</tr>
<tr>
<td>Outcome</td>
<td>Distinguishes if patient has diabetes or not. 0 : NO, 1 : Yes</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">diabetes</span> <span class="o">=</span> <span class="n">Table</span><span class="p">()</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s2">&quot;diabetes.csv&quot;</span><span class="p">)</span>
<span class="n">diabetes</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="2.-Exploring-the-Data">2. Exploring the Data<a id="section-2" /><a class="anchor-link" href="#2.-Exploring-the-Data"> </a></h1>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now would be a good time to do some preliminary exploration into our dataset. When doing this we can try to find different relationships or correlations between variables in our dataset. This can give us an idea about the structure and nature of our dataset and the variables inside of it.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The following cell shows us how many entries are in each column. It looks like our table has 9 columns and 768 rows. Each row corresponds to a certain patient, therefore, we have 768 patients.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">diabetes</span><span class="o">.</span><span class="n">size</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can also try to see if there is any missing or anamolous data in our dataset.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">diabetes</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;Insulin&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The table above shows the number of patients at each level of insulin. Do you notice anything interesting about one of the counts? One of the counts is 374 and it corresponds to the insulin level of 0. It isn't possible to have an insulin level of 0. Can there be some other explanation as to why so many of the patients in out dataset have a measured insulin level of 0?</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>What happened is that many patients did not have their insulin level measured, so the constructors of this dataset decided to use 0 as a default value for those who did not have their insulin measured. This is a common practice in data science and is something that data scientists often have to deal with and infer upon. Having a lot of 0's for insulin can hurt our analysis on this dataset, but in order to make up for it we can either ignore the insulin ratings that have a 0 or we can just ignore the entire insulin column in our table.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For example, in the following cell, we decide to select all rows or individuals in our dataset who don't have 0 as their insulin, or, in other words, had their insulin level measured. Then, we construct a histogram which compares the distribution of insulin for those with diabetes in our dataset and the distribution of insulin for those without diabetes. Which one do you think should have a lower insulin level on average, those with diabetes or those without?</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">diabetes</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;Insulin&#39;</span><span class="p">,</span> <span class="n">are</span><span class="o">.</span><span class="n">not_equal_to</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="s1">&#39;Insulin&#39;</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="s1">&#39;Outcome&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="alert alert-info"> 

**QUESTION**: In the cell below, explain the differences you see in insulin levels between those with diabetes and those without. Explain why this difference exists using your knowledge about biology and what you read in the lab09 overview.

</div><p><em>Hint:</em> Which distribution or histogram is "higher" or more to the right? Remember 0 represents those without diabetes and 1 is those with diabetes.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Type your answer here, replacing this text.</em></p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can also try to find other relationships between the variables in our data. We can try to answer questions like: How is BMI related to Age in the people in our dataset? How do people with diabetes compare to those without diabetes when it comes to their glucose levels in our dataset?</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The following scatterplot plots an individual's Age vs. the number of pregnancies they have had. Look at the scatterplot and try to see what the relationship between Age and Pregnancies is.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">diabetes</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="s1">&#39;Pregnancies&#39;</span><span class="p">,</span> <span class="n">fit_line</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="alert alert-info"> 

**QUESTION**: In the cell below explain the raltionship between age and number of pregnancies in the above scatterplot. Use the plotted line to help explain this relationship. How do the number of pregnancies seem to change with increasing age for the people in our dataset?

</div>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Type your answer here, replacing this text.</em></p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="alert alert-info">

**QUESTION:** In the code cell below, create another scatterplot of two columns from `diabetes` that you think might be related.

</div>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">...</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="3.-Hypothesis-Testing-">3. Hypothesis Testing <a id="section-3" /><a class="anchor-link" href="#3.-Hypothesis-Testing-"> </a></h2><p>In this section, we will introduce a complex statistical topic called <strong>hypothesis testing</strong> and the data science technique we use to perform it called <strong>bootstrapping</strong>. If you get tripped up in your understanding of this section and the complex statistical reasoning behind it, <em>don't worry</em>. This is a very quick-and-dirty introduction to a complex and nuanced topic, so you aren't expected to understand everything presented here entirely in the first go. If you would like to learn more about this topic, take a look at the <a href="https://www.inferentialthinking.com/chapters/11/Testing_Hypotheses.html">Data 8 textbook</a>.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="3a.-The-Bootstrap-">3a. The Bootstrap <a id="section-3a" /><a class="anchor-link" href="#3a.-The-Bootstrap-"> </a></h3><p>Before getting into hypothesis testing itself, let's think about one of the main challenges of statistics: sampling. Collecting data requires time, effort, and, most importantly, \$\\$\$. For this reason, statisticians and data scientists often find themselves trying to answer very complicated questions using only a single data set. But how can we use only a small sample of a population to make generalized predictions?</p>
<p>One method of doing this is called the <strong>bootstrap</strong>. Using this technique, a data scientist can generate new samples from an existing data set, by resampling from the original sample. In this way, we can generate new samples from the existing sample, such that each sample has the same probability as every other and the statistical assumptions of the original sample are kept for each resample.</p>
<p>Once we have our bootstrap resample, we can then calculate a statistic from that sampled (called the <em>test statistic</em>) and use those values to make predictions about the value of the test statistic for the population from which our original sample was drawn.</p>
<p><img src="images/bootstrap.png" alt="Bootstrap"></p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Coding-the-bootstrap">Coding the bootstrap<a class="anchor-link" href="#Coding-the-bootstrap"> </a></h4><p>Let's consider how we might go about bootstrapping a table. If we wanted to create a new sample of rows from our original table, we would just want to sample the rows <em>with replacement</em> to create a new sample of the same size as our original. Luckily, the <code>datascience</code> library includes a <code>Table.sample()</code> function which does just that:</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">diabetes</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Our sample above has the same number of rows as the original table, but each row is selected uniformly at random from the set of all rows.</p>
<p>If we want to create multiple resamples of the data, we can do the same thing over and over again. The simplest way of repeatedly performing a task is to use a <code>for</code> loop, which <em>iterates</em> over each element in an array. Let's say we want to perform an action 10 times. We would use a <code>for</code> loop like the one below:</p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">function</span><span class="p">()</span>
</pre></div>
<p>The <code>for</code> loop above tells Python this:</p>
<blockquote><p>For each element, which we will call <code>i</code>, in the array <code>np.arange(10)</code>, run <code>function()</code>.</p>
</blockquote>
<p>The function <code>np.arange(x)</code> takes in an integer and returns an array of integers $0, 1, 2, ..., x-1$. This means that <code>np.arange(10)</code> performs the action 10 times. Therefore, if we wanted, say, 100 resamples of our <code>diabetes</code> table, our <code>for</code> loop would look something like this:</p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="n">diabetes</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="alert alert-info">

**QUESTION:** In the cell below, write a simple for loop to print out the phrase `"data science is fun!"` 7 times.

</div>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">...</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Collecting-values">Collecting values<a class="anchor-link" href="#Collecting-values"> </a></h4><p>Now recall the <em>point</em> of bootstrapping: we want to resample our table and calculate a test statistic on each resample. This poses two problems: 1) how do we calculate our test statistic, and 2) how do we collect the values?</p>
<p>Let's address the second first. We can collect the values in... you guessed it! An array! If we wanted to do this, we would need to <em>append</em> our test statistic value to our collection array during each <em>iteration</em> of the <code>for</code> loop:</p>
<div class="highlight"><pre><span></span><span class="n">collection</span> <span class="o">=</span> <span class="n">make_array</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="c1"># resample</span>
    <span class="n">test_statistic</span> <span class="o">=</span> <span class="c1"># do something</span>
    <span class="n">collection</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">test_statistic</span><span class="p">)</span>
</pre></div>
<p>The function <code>np.append()</code> appends its second argument to its first argument in an array.</p>
<h4 id="Test-statistics">Test statistics<a class="anchor-link" href="#Test-statistics"> </a></h4><p>Now let's consider the hard question: our test statistic. The type of value that makes a good test statistic is one that is either very high or very low but never either-or. The best way to explain this is with an example, so let's consider the case we're working on now. Suppose this is the question we're trying to answer:</p>
<blockquote><p>Does the number of pregnancies affect the likelihood of having diabetes?</p>
</blockquote>
<p>While we can't yet answer this question, let's think about something: if we were to bootstrap our sample to answer this, what would be a good test statistic? I propose that a good one might be the <em>absolute difference between the mean number of pregnancies for both outcomes</em>. This means that we separate our table by the outcome variable, take the mean of the number of pregnancies for each group, and then use the absolute difference between those means as our test statistic.</p>
<p>This is a reasonable test statistic because its magnitude will answer our question: if the value is relatively low, then the number of pregnancies does <em>not</em> affect the outcome, because the mean number of pregnancies are close for those who do and do not have diabetes. If it is high, then the number of pregnancies <em>does</em> make a difference.</p>
<p>Let's consider how we would code this question. The function <code>test_statistic</code> defined below takes in a table, groups by outcome, and returns the test statistic discussed above.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_statistic</span><span class="p">(</span><span class="n">tbl</span><span class="p">):</span>
    <span class="n">tbl</span> <span class="o">=</span> <span class="n">tbl</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s2">&quot;Outcome&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">tbl</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s2">&quot;Pregnancies mean&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="n">tbl</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s2">&quot;Pregnancies mean&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

<span class="c1"># test on our original table</span>
<span class="n">test_statistic</span><span class="p">(</span><span class="n">diabetes</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Recap">Recap<a class="anchor-link" href="#Recap"> </a></h4><p>So, now we have all of the pieces for our bootstrap: we know how to resample our table, how to collect our test statistic, and how we're going to <em>calculate</em> our test statistic. Our boostrap will look something like this:</p>
<div class="highlight"><pre><span></span><span class="n">collection</span> <span class="o">=</span> <span class="n">make_array</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="c1"># resample table</span>
    <span class="n">value</span> <span class="o">=</span> <span class="c1"># calculate test statistic</span>
    <span class="n">collection</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="3b.-The-Hypothesis-Test-">3b. The Hypothesis Test <a id="section-3b" /><a class="anchor-link" href="#3b.-The-Hypothesis-Test-"> </a></h3><p>Let me pose to you a question: Why can't we just calculate our test statistic on the original table and use that as our estimate of the population value?</p>
<p>Our sample is only a small subset of the population, and sampling introduces some inherent error. Even if the sampling methods are perfectly random, just the fact that we have <em>randomly</em> selected from the population introduces some error due to random chance.</p>
<p>For this reason, we use the bootstrap and hypothesis testing to make predictions about the population from which a sample is drawn.</p>
<p>In a hypothesis test, we use a bootstrap to calculate a <strong>p-value</strong>, which is a measure of how often a value of the test statistic <em>more extreme</em> than the original value occurs in our random sampling. This is a complex topic, as is the notion of "hypotheses" in the statistical sense.</p>
<div class="alert alert-warning">

Please take a few moments now to read [this section](https://www.inferentialthinking.com/chapters/11/3/Decisions_and_Uncertainty.html) of the Data 8 textbook, up to the section entitled "The GSI's Defense." It is assumed that you (mostly) understand this section before moving on.

</div>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Thinking about the definition of a <strong>null hypothesis</strong>, it should be clear to you that our null hypothesis is something like the following:</p>
<blockquote><p>The number of pregnancies does not affect the diabetes outcome, and any difference observed is due only to random chance.</p>
</blockquote>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="alert alert-info">

**QUESTION:** In the Markdown cell below, write down our _alternative_ hypothesis.

</div>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Type your answer here, replacing this text.</em></p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As the Data 8 textbook mentions, we calculate a p-value to determine the statistical significance of our finding. Because large values of our test statistic point to our alternative hypothesis, we will be checking the values that we collect for being <em>greater than or equal to</em> the original value.</p>
<p><strong>One last, quick thing.</strong> In this example, we're thinking about whether or not being in a certain <em>class</em> is affected by a numeric variable. This type of question is answered by a specific type of hypothesis test called an <strong>A/B test</strong>, in which we look at the distributions of variables for observations that fall into two classes ("A" and "B"). In an A/B test, we don't just randomly sample from the table; instead, we <em>shuffle</em> the classifications (the <code>outcome</code> column in this example) and look at the value of our test statistic when the class is assigned at random. This can be accomplished similarly to a regular hypothesis test, although instead of resampling our table, we will be changing the values in a particular column.</p>
<p>Now that we have all of the theoretical background, let's conduction our hypothesis test! (The cell below might take a few seconds to run).</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">collection</span> <span class="o">=</span> <span class="n">make_array</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
    <span class="n">sample</span> <span class="o">=</span> <span class="n">diabetes</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">with_replacement</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">sample</span> <span class="o">=</span> <span class="n">diabetes</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;Outcome&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s2">&quot;Outcome&quot;</span><span class="p">,</span> <span class="n">sample</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s2">&quot;Outcome&quot;</span><span class="p">))</span>
    <span class="n">ts</span> <span class="o">=</span> <span class="n">test_statistic</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
    <span class="n">collection</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">ts</span><span class="p">)</span>
    
<span class="n">p_value</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">collection</span> <span class="o">&gt;=</span> <span class="n">test_statistic</span><span class="p">(</span><span class="n">diabetes</span><span class="p">))</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The p-value is </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">p_value</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Notice that the only change here for this being an A/B test is the addition of an extra line, where we replace the original outcomes with the shuffled ones.</p>
<p>Because our p-value is so low (below the conventional cutoff of 0.05), we accept the alternative hypothesis, and state that the number of pregnancies <em>does</em> affect whether or not you're likely to have diabetes.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="alert alert-info">

**QUESTION:** Now you'll run your own hypothesis test! Start by choosing a variable you think might be linked to `Outcome` and filling in the Markdown cell below with your null and alternative hypotheses.

</div>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Null hypothesis:</strong> <em>Type your answer here, replacing this text.</em></p>
<p><strong>Alternative hypothesis:</strong> <em>Type your answer here, replacing this text.</em></p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="alert alert-info">

**QUESTION:** Now that you have your hypotheses, fill in the skeleton code to run your own hypothesis test on another variable.

</div><p><em>Hint:</em> Start by selecting a column label and filling in the <code>...</code> in <code>my_test_statistic</code> with that. The function <code>my_test_statistic</code> will calculate the test statistic value for you. Then fill in the <code>for</code> loop like above to create an array of test statistic values in <code>my_collection</code>.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">my_test_statistic</span><span class="p">(</span><span class="n">tbl</span><span class="p">):</span>
    <span class="n">tbl</span> <span class="o">=</span> <span class="n">tbl</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s2">&quot;Outcome&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">tbl</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s2">&quot;... mean&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="n">tbl</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s2">&quot;... mean&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

<span class="n">my_collection</span> <span class="o">=</span> <span class="n">make_array</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
    <span class="o">...</span>
    
<span class="n">my_p_value</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">my_collection</span> <span class="o">&gt;=</span> <span class="n">my_test_statistic</span><span class="p">(</span><span class="n">diabetes</span><span class="p">))</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">my_collection</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The p-value is </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">my_p_value</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="alert alert-info">

**QUESTION:** Based on the p-value you got in the cell above, which hypothesis do you accept and why?

</div>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Type your answer here, replacing this text.</em></p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="4.-Classifier-Conceptual-Background">4. Classifier Conceptual Background<a id="section-4" /><a class="anchor-link" href="#4.-Classifier-Conceptual-Background"> </a></h1>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now that we have explored our data a little, it's a good time to delve further into the idea of classification and, more generally, machine learning.</p>
<p>The next section is dense so it might be helpful to walk through the concepts with a partner or in a group.</p>
<p>Machine learning is a school of thought which generally tries to make accurate models and predictions about the world using data. Machine learning algorithms can become quite complex, to the point where an algorithm can start to learn from data on its own. In today's lab, we will be implementing a machine learning model which uses supervised learning to build it. The model we will be building with our data is a classifier.</p>
<p>Classification is a type of machine learning and modeling which takes in certain inputs or data about a subject and tries to predict which category or group that certain data point or subject lies in based on data or knowledge we already have. The knowledge that it generally relies on, is that it uses a dataset of subjects that we already know the categories or classifications for. The categories or classes for our data are diabetic and non-diabetic. We already have a dataset of individuals for whom we know if a particular individual is diabetic or not.</p>
<p>Our classifier will use a K-nearest neighbors algorithm to classify an input as diabetic or non-diabetic. Please don't get too caught up on the scary name. Essentially, this process finds the closest individuals in our dataset to the new individual we are trying to classify. It does this by calculating distances between our individual of interest's health measurements and the health measurements of all the individuals in the dataset. Once it has these k-closest individuals, it can then classify our new individual as diabetic or non-diabetic based on the classifications of the individuals we found are closest to him or her.</p>
<p>Here is an example:</p>
<p>Say I am trying to classify Natalie with a 3-Nearest Neighbor classifier and find that her three neearest neighbors in my dataset are Jose, Kimberly, and Luke. I know that Luke and Kimberly have diabetes and that Jose doesn't because they are in my dataset of people who I know the classification of. Because a majority of the three nearest neighbors to Natalie are diabetic, I would then classify Natalie as diabetic.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="alert alert-info">

**QUESTION**: Classify Adel based on the following information and put your answer into the quotations for the variable `adel_classification`.

</div>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I find that Adel's 5-nearest neighbors are Tracy, Hanh, Jordan, Justin, and Sam. Sam and Tracy have diabetes, but Jordan, Justin, and Hanh do not. How should I classify Adel?</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">adel_classification</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now is a good time to take a deeper look at the data we have for diabetes and see if we can see any problems with the data in relation to the classifier we will be building.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">diabetes</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>One problem with the data is that the different columns or health measurements we take on an individual have different scales. For example, Glucose has numbers in the hundreds, Age in the tens, and The Diabetes Pedigree Function is a number between 0 and 1. Could this be a problematic feature of our data set, given we are measuring the distances between two individuals with these health measurements?</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The problem with having different scales when we are calculating distance between two people is that two people could be very close to each other in their Diabetes Pedigree Function (DPF) Score but we may not be able to see this because Glucose is on such a larger scale. For example, say we have two pairs of people and we just have their Glucose and DPF data in the form (Glucose, DPF). The first pair of people have data of (140, 0) (150, 1) and the second pair of people have data of (140, 0.350), (153, 0.352). The first pair has a distance of $\sqrt101$ but the second pair has a distance of approximately $\sqrt169$. What we aren't taking into account is that a distance of 1 in DPF scores is actually very significant because its the biggest possible distance you can have in DPF scores, but the second pair's distance in Glucose is three larger than the first pair's, which our distance calculation is putting a lot of weight on, even though its not that significant of a difference in Glucose levels. The second pair should actually be closer because their DPF scores are almost identical, and their glucose measurements are much further off than the first pairs.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>One way we can account for this is to just put all of the data into standard units. Essentially, instead of having the raw data we put the number of standard deviations that a specific entry is above or below the mean of the data in that column. This will make sure all data points are in a range of numbers from about -3 to 3. Once we do this we will no longer have any issues with scaling for our distance calculations</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">standard_units</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">std</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">normalized_x</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">mean</span><span class="p">)</span><span class="o">/</span><span class="n">std</span>
    <span class="k">return</span> <span class="n">normalized_x</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">outcomes</span> <span class="o">=</span> <span class="n">diabetes</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s2">&quot;Outcome&quot;</span><span class="p">)</span>
<span class="n">diabetes_std</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">table_apply</span><span class="p">(</span><span class="n">diabetes</span><span class="p">,</span> <span class="n">standard_units</span><span class="p">)</span>
<span class="n">diabetes_std</span> <span class="o">=</span> <span class="n">diabetes_std</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;Outcome&quot;</span><span class="p">)</span>
<span class="n">diabetes_std</span> <span class="o">=</span> <span class="n">diabetes_std</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s2">&quot;Outcome&quot;</span><span class="p">,</span> <span class="n">outcomes</span><span class="p">)</span>
<span class="n">diabetes_std</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now that we have an idea of how our classification works and we've fixed our data, how will we know how well our classifier works? In order to know this, we would have to have access to new data which we have not created our classifier with and that still has the known classification of the individuals in it. We could go scouring the internet for a new data set, but luckily data scientists have come up with a clever trick to get around this.</p>
<p>The idea is to split up the data set we already have into what are called training and testing sets. The training set will be larger and will consist of the data that we use to create our classifier, while the testing set will not be accessed or viewed until we want to test how well our classifier works. Because we know the classification of everyone in our data set already, we will know whether or not a certain individual has diabetes or not in our testing set. Then we will try to classify everyone in our testing set with our classifier and see how accurate or how often our classifier makes the right prediction.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The next cell calls a function on our table, .split(k), which will automatically split our tables into one with k rows that are randomly sampled from the original table and one table with the rest of the rows in our original table. We usually want between 10-30% of our data in the testing set and the rest in the training.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">diabetes_testing</span><span class="p">,</span> <span class="n">diabetes_training</span> <span class="o">=</span> <span class="n">diabetes_std</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="mi">170</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">diabetes_training</span><span class="o">.</span><span class="n">num_rows</span><span class="p">,</span> <span class="n">diabetes_testing</span><span class="o">.</span><span class="n">num_rows</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="5.-Building-the-Classifier">5. Building the Classifier<a id="section-5" /><a class="anchor-link" href="#5.-Building-the-Classifier"> </a></h1>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now that we finally have an understanding of classification and a training data set we can build our classifier with, we can finally start to build it. From now on we will be exclusively using our training set to build our model.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>What we need to figure out, is which health measurements in our data will give us the most accurate classifications. We can do this by finding out which variables have the biggest difference between people with diabetes and people without diabetes. One thing we can check is a difference in means between the two groups of people.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">diabetes_training</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;BloodPressure&quot;</span><span class="p">,</span> <span class="s2">&quot;Outcome&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s2">&quot;Outcome&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>What we did in the above cell is select the BloodPressure and Outcome columns in our table (remember outcome has two possible values, 0 and 1 for non-diabetic and diabetic), and then we grouped by outcome. What this does is separate our entries into the different unique values for that column. So for our table, our entries are split into the groups of people who have 0 and 1 for their outcome value. We also pass in a function np.mean into the group method. Passing in this function, np.mean, tells the computer how it should aggregate the BloodPressure entries in each group. Therefore, np.mean tells the computer to find the mean BloodPressure of each of these groups. So the second column conatins the means for each group, 0 and 1.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Remember that our variables are in standard units now, so the values indicate how many standard deviations above and below the mean each respective group is on average. If you are unfamiliar with this terminology, then just think of a standard unit as a measure of how high or below a specific number is with respect to the mean. A number that is negative is below the mean, a number that is positive is above the mean. Numbers that are close to zero are close to the mean with respect to that group of data. About as far as a number can get from the mean is 3 or -3 (usually), with 3 being a number very high above the mean and -3 being a number very below the mean.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For our table above we see group 0 has an average of -0.0685657 meaning, on average, non-diabetic patients have a Bloodpressure below the mean BloodPressure for everyone in the training data. And the other mean for group 1 is 0.0584094, meaning the average person with diabetes has a BloodPressure above the same mean. Both values are pretty close to zero though, so there isn't that big of a difference in means between the two groups.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="alert alert-info">

**QUESTION**: Now try finding the mean of different health measurements for each group, 0 and 1, in our training data. Try doing it for the "Age" column and the "BMI" column (Hint: look at where we passed the "BloodPressure" column label in the previous line of code). Observe if the means are above or below zero and how far above and below zero they are for each group.)

</div>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Replace the Ellipsis with your code to compute the mean for each column</span>
<span class="n">bmi_means</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">bmi_means</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">age_means</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">age_means</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="alert alert-info">

**QUESTION**: Now write which column you observed had the larger mean difference in the Markdown box below
</div>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Type your answer here, replacing this text.</em></p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Seeing a difference in the mean between the two groups of those who are diabetic and those who are not in our training data is helpful in deciding which health measurements have the biggest disparities between those two groups. However, it is not that intuitive or easy to see and it might be better to try to visualize the data. If we could see the distribution of the health measurements for the different groups then it might be easier to decide which health measurements seem to be the biggest difference makers between diabetic and non-diabetic patients.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Luckily, we have a tool that we have seen before called a histogram which places our data into bins. Each bin has a height which is a percentage of the data in that bin and a width which is the range of the data in that bin. This information is not too important and you don't have to completely understand the intricacies of a histogram. What is important to see is that larger or taller bars have more of the data in them and that the histogram overall shows the distribution of the data. Therefore, if we create a histogram for each group for say BloodPressure then we can see a more complete picture of how diabetic and non-dabetic people differ in BloodPressure.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">diabetes_training</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;BloodPressure&quot;</span><span class="p">,</span> <span class="s2">&quot;Outcome&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">group</span><span class="o">=</span><span class="s2">&quot;Outcome&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Diabetic patients have the yellow histogram and non-diabetic patients have the blue histogram. We can see that there are some differences between the two distributions. The diabetic histogram seems to have values which are on average above the mean. We can see this because its center, or where is peaks is above 0 (again we are in standard units) and the non-diabetic histogram has a center below zero. We can see from the histograms that those with diabetes seem to have higher Blood Pressure than those without diabetes in our dataset. We can also see that the distribution is not that significant becuse the histograms seem to overlap quite a bit. This agrees with our above table when we found the difference in BloodPressure means between group 0 and 1.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="alert alert-info">

**QUESTION**: In the cells below, create the histogram indicated by the comment. Use the above histogram call as a scaffold for your histograms. Once you have created these histograms answer the questions that follow them.
    </div>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Create the histogram for the &quot;Age&quot; column</span>
<span class="n">diabetes_training</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="s2">&quot;Outcome&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">group</span><span class="o">=</span><span class="s2">&quot;Outcome&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Create the histogram for the &quot;BMI&quot; column</span>
<span class="o">...</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Create the histogram for the &quot;DiabetesPedigreeFunction&quot; column</span>
<span class="o">...</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Create the histogram for the &quot;Glucose&quot; column</span>
<span class="o">...</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Create the histogram for the &quot;Pregnancies&quot; column</span>
<span class="o">...</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Create the histogram for the &quot;SkinThickness&quot; column</span>
<span class="o">...</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="alert alert-info">

**QUESTION**: Looking at the above histograms that you made, which variable seems to have the biggest disparity between patients who are diabetic and patients who are not diabetic? (Essentially, which variable results in the two most different histograms?) Using you knowledge of diabetes, why is it that this variable would be so important in distinguishing between diabetic people and non-diabetic people? Should we use this variable in our classifier?
    </div>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Type your answer here, replacing this text.</em></p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="alert alert-info">

**QUESTION**: Look at the histograms provided for BloodPressure and the one you made for BMI. Besed on these histograms which variable seems to be the more discriminating of the two between people with diabetes and people without diabetes. Which one would be better to use for our classifier?
    </div>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Type your answer here, replacing this text.</em></p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="6.-Testing-the-Classifier">6. Testing the Classifier<a id="section-6" /><a class="anchor-link" href="#6.-Testing-the-Classifier"> </a></h1>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>After creating and analyzing the above histograms we now have a good idea of which variables would be the most effective to use in our classifier. The cells below actually implement the K Nearest Neighbors Algorithms we talked about in the Conceptual Background section earlier in this lab. It is not expected that you understand how these functions work, but it is good to understand how the classifier works on a high level.</p>
<p>The <code>classifier_accuracy</code> function is the function which will actually take in our training set and use it to predict the classifications of the individuals in our testing set. Then, it will check how many of our predictions were right and return a decimal bewteen 0 and 1. This decimal is the ratio of how many predictions we got right over how many predictions we made. Multiply this number by 100 and you get the percentage accuracy of our classifier. The way to call it is to put the training data into the first argument, the test data into the second argument and the number of neightbors you want your K Nearest Neighbors Algorithm to use like this:</p>
<div class="highlight"><pre><span></span><span class="n">classifier_accuracy</span><span class="p">(</span><span class="n">training</span><span class="p">,</span> <span class="n">testing</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
</pre></div>
<p>Run the cells to below to make sure we can access the function.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_k_nearest</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">rows</span>
    <span class="n">x_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">nbrs</span> <span class="o">=</span> <span class="n">NearestNeighbors</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="n">k</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">rows</span><span class="p">))</span>
    <span class="n">distances</span><span class="p">,</span> <span class="n">indices</span> <span class="o">=</span> <span class="n">nbrs</span><span class="o">.</span><span class="n">kneighbors</span><span class="p">(</span><span class="n">x_array</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">distances</span><span class="p">,</span> <span class="n">indices</span>
    
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">classifier_accuracy</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
    <span class="n">distance</span><span class="p">,</span> <span class="n">indices</span> <span class="o">=</span> <span class="n">get_k_nearest</span><span class="p">(</span><span class="n">test</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;Outcome&quot;</span><span class="p">),</span> <span class="n">table</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;Outcome&quot;</span><span class="p">),</span> <span class="n">k</span><span class="p">)</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">rows</span>
    <span class="n">num_right</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">classifications</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">test_rows</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">rows</span>
    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">:</span>
        <span class="n">classes_nearest</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">diabetes_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">index</span><span class="p">:</span>
            <span class="n">classes_nearest</span> <span class="o">+=</span> <span class="p">[</span><span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
        <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">classes_nearest</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">elem</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">diabetes_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">diabetes_count</span> <span class="o">&gt;</span> <span class="n">k</span><span class="o">/</span><span class="mi">2</span><span class="p">:</span>
            <span class="n">classifications</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">classifications</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">classifications</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">classifications</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">test_rows</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">num_right</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">num_right</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">test_rows</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For <code>diabetes_training_best</code> and <code>diabetes_testing_best</code>, input the labels of the columns you think would be best to use for our classifier. You can figure this out from the analysis we did on the histograms before. You can also try to figure out the difference in means like we did before, and see which difference is the largest. Try different combinations of columns even if you think they won't work as well as others. Seeing how different columns or variables change our accuracy is important and can verify the assumptions we made about the importance of those specific columns. You can also change the number of neighbors you want to use and see how the accuracy changes. Currently, it is set at <code>5</code>, but you could change it to another number. Make sure the number is odd though, because that way we can guarantee a majority of either diabetic or non-diabtic patients.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can make your classifier use all the columns if you would like. Just make sure to keep the "Outcome" column because we want to know what the classification of the people are in both the training and testing sets. Try to make your accuracy as high as possible by using what you think are the most important columns/variables. Just enter it in like this:</p>
<div class="highlight"><pre><span></span><span class="n">diabetes_training_best</span> <span class="o">=</span> <span class="n">diabetes_training</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;Column1&quot;</span><span class="p">,</span> <span class="s2">&quot;Column2&quot;</span><span class="p">,</span> <span class="s2">&quot;Column3&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="s2">&quot;Outcome&quot;</span><span class="p">)</span>
<span class="n">diabetes_testing_best</span> <span class="o">=</span> <span class="n">diabetes_testing</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;Column1&quot;</span><span class="p">,</span> <span class="s2">&quot;Column2&quot;</span><span class="p">,</span> <span class="s2">&quot;Column3&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="s2">&quot;Outcome&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="alert alert-info">

**QUESTION**: Follow the example above to try and reach the highest possible accuracy. You should be using a variety of different columns in the dataset to try and reach a better conclusion, as well as changing the number of Nearest Neighbors to see if your accuracy changes. For each attempt that you run, make an new box below as marked.
</div>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Replace ... with the names of columns you want to include in the classifier.</span>
<span class="n">diabetes_training_best</span> <span class="o">=</span> <span class="n">diabetes_training</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="s2">&quot;Outcome&quot;</span><span class="p">)</span>
<span class="n">diabetes_testing_best</span> <span class="o">=</span> <span class="n">diabetes_testing</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="s2">&quot;Outcome&quot;</span><span class="p">)</span>
<span class="n">classifier_accuracy</span><span class="p">(</span><span class="n">diabetes_training_best</span><span class="p">,</span> <span class="n">diabetes_testing_best</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Create more boxes here and below with your other attempts.</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The highest percentage accuracy you got was probably around 75%. So what's the big deal? Well, try thinking about it this way.</p>
<p>If you were to try to guess heads or tails on a coin flip 170 times (which is the size of our testing set), the chance of you getting 75% of those guesses right or more is a very miniscule chance, and if you did get 75% or more of them right then that would probably be reason to believe that you could predict the future.</p>
<p>Essentially, that is what our classifier is doing. It is making guesses (educated ones) about a person given the nature of the data surrounding that person. A tool like this can be very important to doctors and instrumental in saving people's lives. It is important to make a classifier such as this as accurate as possible and even bias it to classify people as diabetic more often. The reason for doing this is because we don't want people walking around thinking they don't have diabetes when they actually do, so what we're afriad of is a false negative.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="alert alert-info">

**QUESTION**: Look up a research article on Pubmed about one of these variables and how it relates to diabetes. Write the citation in the box below and explain the main findings in 2-3 sentences.  [PubMed Link](https://www.ncbi.nlm.nih.gov/pubmed/)
</div>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Type your answer here, replacing this text.</em></p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Final-Survey">Final Survey<a class="anchor-link" href="#Final-Survey"> </a></h3><p>Congrats! You've finished the final Jupyter Notebook lab! The Division of Data Sciences would like to ask you (both students) to please fill this survey out as a part of your lab check-off. We would like to improve the module for future semesters, and would really appreciate it if you took the time to fill this out so we can better serve you!</p>
<p>Please make sure you are logged into your Berkeley (.edu) email address to access the form.</p>
<h2 id="Survey-Link"><a href="https://forms.gle/8o29hBSGZ28s4Htr5">Survey Link</a><a class="anchor-link" href="#Survey-Link"> </a></h2><p>Alternatively, please copy and paste this link into your URL bar: <a href="https://forms.gle/8o29hBSGZ28s4Htr5">https://forms.gle/8o29hBSGZ28s4Htr5</a></p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Saving-the-Notebook-as-an-HTML">Saving the Notebook as an HTML<a class="anchor-link" href="#Saving-the-Notebook-as-an-HTML"> </a></h3><p>Congrats on finishing your final lab notebook! This time, you will be submitting this notebook as an <code>HTML</code> file. To turn in this lab assignment follow the steps below:</p>
<blockquote><ol>
<li>In the toolbar above, click on <code>File</code> &gt; <code>Download as</code> &gt; <code>HTML</code></li>
<li>The file should have been saved in an HTML format in your downloads folder.</li>
<li>Click to open in a web browser of your choice to make sure that everything looks okay.</li>
</ol>
</blockquote>
<p>Your lab instructor will explain to you what to do afterwards.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>
<p>Notebook developed by: Jason Webb and Chris Pyles</p>
<p>Data Science Modules: <a href="http://data.berkeley.edu/education/modules">http://data.berkeley.edu/education/modules</a></p>

</div>
</div>
</div>
</div>

 


    </main>
    
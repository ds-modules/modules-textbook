<!DOCTYPE html>
<html lang="en">
  

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,minimum-scale=1">

  <title>Problem Set 1</title>
  <meta name="description" content="SF Crime PSET 1">

  <link rel="canonical" href="http://ds-modules.github.io/modules-textbook/legal_studies/ps1/SF_Crime_PSET1.html">
  <link rel="alternate" type="application/rss+xml" title="UC Berkeley Data Science Modules" href="http://ds-modules.github.io/modules-textbook/feed.xml">

  <meta property="og:url"         content="http://ds-modules.github.io/modules-textbook/legal_studies/ps1/SF_Crime_PSET1.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="Problem Set 1" />
<meta property="og:description" content="SF Crime PSET 1" />
<meta property="og:image"       content="" />


  <script type="application/ld+json">
  {
  "@context": "http://schema.org",
  "@type": "NewsArticle",
  "mainEntityOfPage":
    "http://ds-modules.github.io/modules-textbook/legal_studies/ps1/SF_Crime_PSET1.html",
  "headline":
    "Problem Set 1",
  "datePublished":
    "2019-10-31T10:01:27-07:00",
  "dateModified":
    "2019-10-31T10:01:27-07:00",
  "description":
    "SF Crime PSET 1",
  "author": {
    "@type": "Person",
    "name": "Alex Nakagawa"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Data 100 at UC Berkeley",
    "logo": {
      "@type": "ImageObject",
      "url": "http://ds-modules.github.io/modules-textbook",
      "width": 60,
      "height": 60
    }
  },
  "image": {
    "@type": "ImageObject",
    "url": "http://ds-modules.github.io/modules-textbook",
    "height": 60,
    "width": 60
  }
}

  </script>
  <link rel="stylesheet" href="/modules-textbook/assets/css/styles.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css ">
  <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">

  <!-- <link rel="manifest" href="/manifest.json"> -->
  <!-- <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#efae0a"> -->
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-TileImage" content="/mstile-144x144.png">
  <meta name="theme-color" content="#233947">

  <!-- Favicon -->
  <link rel="shortcut icon" type="image/x-icon" href="/modules-textbook/images/logo/favicon.ico">

  <!-- MathJax Config -->
  <!-- Allow inline math using $ and automatically break long math lines -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true,
        processEnvironments: true
    },
    CommonHTML: {
        linebreaks: {
            automatic: true,
        },
    },
});
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_CHTML' async></script>

  <!-- DOM updating function -->
  <script>
const runWhenDOMLoaded = cb => {
  if (document.readyState != 'loading') {
    cb()
  } else if (document.addEventListener) {
    document.addEventListener('DOMContentLoaded', cb)
  } else {
    document.attachEvent('onreadystatechange', function() {
      if (document.readyState == 'complete') cb()
    })
  }
}

// Helper function to init things quickly
initFunction = function(myfunc) {
  runWhenDOMLoaded(myfunc);
  document.addEventListener('turbolinks:load', myfunc);
};
</script>

  <!-- Define some javascript variables that will be useful in other javascript -->
  <script>
    const site_basename = '/modules-textbook';
  </script>

  <!-- Add AnchorJS to let headers be linked -->
  <script src="/modules-textbook/assets/js/anchor.min.js"  type="text/javascript"></script>
  <script>

initFunction(function () {
    anchors.add("main h1, main h2, main h3, main h4")
});

</script>

  <!-- Include Turbolinks to make page loads fast -->
  <!-- https://github.com/turbolinks/turbolinks -->
  <script src="/modules-textbook/assets/js/turbolinks.js" async></script>
  <meta name="turbolinks-cache-control" content="no-cache">

  <!-- Load nbinteract for widgets -->
  <script src="https://unpkg.com/nbinteract-core" async></script>

  <!-- Load Thebelab for interactive widgets -->
  <!-- Include Thebelab for interactive code if it's enabled -->

<script type="text/x-thebe-config">
    {
      requestKernel: true,
      binderOptions: {
        repo: 'ds-modules/modules-textbook',
        ref: 'master',
      },
      kernelOptions: {
        name: 'python3',
      }
    }
</script>
<script src="https://unpkg.com/thebelab@0.3.3/lib/index.js"></script>
<script>
    /**
     * Add attributes to Thebelab blocks
     */

    const initThebelab = () => {
        const addThebelabToCodeCells = () => {
            console.log("Adding thebelab to code cells...");
            // If Thebelab hasn't loaded, wait a bit and try again. This
            // happens because we load ClipboardJS asynchronously.
            if (window.thebelab === undefined) {
                setTimeout(addThebelabToCodeCells, 250)
            return
            }

            // If we already detect a Thebelab cell, don't re-run
            if (document.querySelectorAll('div.thebelab-cell').length > 0) {
                return;
            }

            // Find all code cells, replace with Thebelab interactive code cells
            const codeCells = document.querySelectorAll('.input_area pre')
            codeCells.forEach((codeCell, index) => {
                const id = codeCellId(index)
                codeCell.setAttribute('data-executable', 'true')

                // Figure out the language it uses and add this too
                var parentDiv = codeCell.parentElement.parentElement;
                var arrayLength = parentDiv.classList.length;
                for (var ii = 0; ii < arrayLength; ii++) {
                    var parts = parentDiv.classList[ii].split('language-');
                    if (parts.length === 2) {
                        // If found, assign dataLanguage and break the loop
                        var dataLanguage = parts[1];
                        break;
                    }
                }
                codeCell.setAttribute('data-language', dataLanguage)

                // If the code cell is hidden, show it
                var inputCheckbox = document.querySelector(`input#hidebtn${codeCell.id}`);
                if (inputCheckbox !== null) {
                    setCodeCellVisibility(inputCheckbox, 'visible');
                }
            });

            // Remove the event listener from the page so keyboard press doesn't
            // Change page
            document.removeEventListener('keydown', initPageNav)
            keyboardListener = false;

            // Init thebelab
            thebelab.bootstrap();

            // Remove copy buttons since they won't work anymore
            const copyButtons = document.querySelectorAll('.copybtn')
            copyButtons.forEach((copyButton, index) => {
                copyButton.remove();
            });

            // Remove outputs since they'll be stale
            const outputs = document.querySelectorAll('.output *, .output')
            outputs.forEach((output, index) => {
                output.remove();
            });
        }

        // Add event listener for the function to modify code cells
        const thebelabButton = document.getElementById('interact-button-thebelab');
        if (thebelabButton === null) {
            setTimeout(initThebelab, 250)
        return
        };
        thebelabButton.addEventListener('click', addThebelabToCodeCells);
    }

    // Initialize Thebelab
    initFunction(initThebelab);
</script>


  <!-- Google analytics -->
  <script src="/modules-textbook/assets/js/ga.js" async></script>

  <!-- Clipboard copy button -->
  <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" async></script>

  <!-- Load JS that depends on site variables -->
  <script>
/**
 * Set up copy/paste for code blocks
 */
const codeCellId = index => `codecell${index}`

const clipboardButton = id =>
  `<a class="btn copybtn o-tooltip--left" data-tooltip="Copy" data-clipboard-target="#${id}">
    <img src="/modules-textbook/assets/images/copy-button.svg" alt="Copy to clipboard">
  </a>`

// Clears selected text since ClipboardJS will select the text when copying
const clearSelection = () => {
  if (window.getSelection) {
    window.getSelection().removeAllRanges()
  } else if (document.selection) {
    document.selection.empty()
  }
}

// Changes tooltip text for two seconds, then changes it back
const temporarilyChangeTooltip = (el, newText) => {
  const oldText = el.getAttribute('data-tooltip')
  el.setAttribute('data-tooltip', newText)
  setTimeout(() => el.setAttribute('data-tooltip', oldText), 2000)
}

const addCopyButtonToCodeCells = () => {
  // If ClipboardJS hasn't loaded, wait a bit and try again. This
  // happens because we load ClipboardJS asynchronously.
  if (window.ClipboardJS === undefined) {
    setTimeout(addCopyButtonToCodeCells, 250)
    return
  }

  const codeCells = document.querySelectorAll('div.highlighter-rouge:not(.output) pre')
  codeCells.forEach((codeCell, index) => {
    const id = codeCellId(index)
    codeCell.setAttribute('id', id)
    if (document.querySelector(`pre#${id} + a`) == null) {
      codeCell.insertAdjacentHTML('afterend', clipboardButton(id));
    }
  })

  const clipboard = new ClipboardJS('.copybtn')
  clipboard.on('success', event => {
    clearSelection()
    temporarilyChangeTooltip(event.trigger, 'Copied!')
  })

  clipboard.on('error', event => {
    temporarilyChangeTooltip(event.trigger, 'Failed to copy')
  })

  // Get rid of clipboard before the next page visit to avoid memory leak
  document.addEventListener('turbolinks:before-visit', () =>
    clipboard.destroy()
  )
}

initFunction(addCopyButtonToCodeCells);
</script>

  <!-- Hide cell code -->
  
<script>
/**
Add buttons to hide code cells
*/


var setCodeCellVisibility = function(inputField, kind) {
    // Update the image and class for hidden
    var id = inputField.getAttribute('data-id');
    var codeCell = document.querySelector(`#${id}`);

    if (kind === "visible") {
        codeCell.classList.remove('hidden');
        inputField.checked = true;
    } else {
        codeCell.classList.add('hidden');
        inputField.checked = false;
    }
}

var toggleCodeCellVisibility = function (event) {
    // The label is clicked, and now we decide what to do based on the input field's clicked status
    if (event.target.tagName === "LABEL") {
        var inputField = event.target.previousElementSibling;
    } else {
        // It is the span inside the target
        var inputField = event.target.parentElement.previousElementSibling;
    }

    if (inputField.checked === true) {
        setCodeCellVisibility(inputField, "visible");
    } else {
        setCodeCellVisibility(inputField, "hidden");
    }
}


// Button constructor
const hideCodeButton = id => `<input class="hidebtn" type="checkbox" id="hidebtn${id}" data-id="${id}"><label title="Toggle cell" for="hidebtn${id}" class="plusminus"><span class="pm_h"></span><span class="pm_v"></span></label>`

var addHideButton = function () {
  // If a hide button is already added, don't add another
  if (document.querySelector('div.hidecode input') !== null) {
      return;
  }

  // Find the input cells and add a hide button
  document.querySelectorAll('div.input_area div.highlight').forEach(function (item, index) {
    if (!item.parentElement.classList.contains("hidecode")) {
        // Skip the cell if it doesn't have a hidecode class
        return;
    }

    const id = codeCellId(index)
    item.setAttribute('id', id);
    item.insertAdjacentHTML('afterend', hideCodeButton(id))

    // Set up the visibility toggle
    hideLink = document.querySelector(`#${id} + input + label`);
    hideLink.addEventListener('click', toggleCodeCellVisibility)
  });
}


// Initialize the hide buttos
var initHiddenCells = function () {
    // Add hide buttons to the cells
    addHideButton();

    // Toggle the code cells that should be hidden
    document.querySelectorAll('div.hidecode input').forEach(function (item) {
        setCodeCellVisibility(item, 'hidden');
        item.checked = true;
    })
}

initFunction(initHiddenCells);

</script>


  <!-- Load custom website scripts -->
  <script src="/modules-textbook/assets/js/scripts.js" async></script>

  <!-- Load custom user CSS and JS  -->
  <script src="/modules-textbook/assets/custom/custom.js" async></script>
  <link rel="stylesheet" href="/modules-textbook/assets/custom/custom.css">

  <!-- Update interact links w/ REST param, is defined in includes so we can use templates -->
  
<script>
/**
  * To auto-embed hub URLs in interact links if given in a RESTful fashion
 */

function getJsonFromUrl(url) {
  var query = url.split('?');
  if (query.length < 2) {
    // No queries so just return false
    return false;
  }
  query = query[1];
  // Collect REST params into a dictionary
  var result = {};
  query.split("&").forEach(function(part) {
    var item = part.split("=");
    result[item[0]] = decodeURIComponent(item[1]);
  });
  return result;
}
    
function dict2param(dict) {
    params = Object.keys(dict).map(function(k) {
        return encodeURIComponent(k) + '=' + encodeURIComponent(dict[k])
    });
    return params.join('&')
}

// Parse a Binder URL, converting it to the string needed for JupyterHub
function binder2Jupyterhub(url) {
  newUrl = {};
  parts = url.split('v2/gh/')[1];
  // Grab the base repo information
  repoinfo = parts.split('?')[0];
  var [org, repo, ref] = repoinfo.split('/');
  newUrl['repo'] = ['https://github.com', org, repo].join('/');
  newUrl['branch'] = ref
  // Grab extra parameters passed
  params = getJsonFromUrl(url);
  if (params['filepath'] !== undefined) {
    newUrl['subPath'] = params['filepath']
  }
  return dict2param(newUrl);
}

// Filter out potentially unsafe characters to prevent xss
function safeUrl(url)
{
   return String(encodeURIComponent(url))
            .replace(/&/g, '&amp;')
            .replace(/"/g, '&quot;')
            .replace(/'/g, '&#39;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;');
}

function addParamToInternalLinks(hub) {
  var links = document.querySelectorAll("a").forEach(function(link) {
    var href = link.href;
    // If the link is an internal link...
    if (href.search("http://ds-modules.github.io") !== -1 || href.startsWith('/') || href.search("127.0.0.1:") !== -1) {
      // Assume we're an internal link, add the hub param to it
      var params = getJsonFromUrl(href);
      if (params !== false) {
        // We have REST params, so append a new one
        params['jupyterhub'] = hub;
      } else {
        // Create the REST params
        params = {'jupyterhub': hub};
      }
      // Update the link
      var newHref = href.split('?')[0] + '?' + dict2param(params);
      link.setAttribute('href', decodeURIComponent(newHref));
    }
  });
  return false;
}


// Update interact links
function updateInteractLink() {
    // hack to make this work since it expects a ? in the URL
    rest = getJsonFromUrl("?" + location.search.substr(1));
    jupyterHubUrl = rest['jupyterhub'];
    var hubType = null;
    var hubUrl = null;
    if (jupyterHubUrl !== undefined) {
      hubType = 'jupyterhub';
      hubUrl = jupyterHubUrl;
    }

    if (hubType !== null) {
      // Sanitize the hubUrl
      hubUrl = safeUrl(hubUrl);

      // Add HTTP text if omitted
      if (hubUrl.indexOf('http') < 0) {hubUrl = 'http://' + hubUrl;}
      var interactButtons = document.querySelectorAll("button.interact-button")
      var lastButton = interactButtons[interactButtons.length-1];
      var link = lastButton.parentElement;

      // If we've already run this, skip the link updating
      if (link.nextElementSibling !== null) {
        return;
      }

      // Update the link and add context div
      var href = link.getAttribute('href');
      if (lastButton.id === 'interact-button-binder') {
        // If binder links exist, we need to re-work them for jupyterhub
        if (hubUrl.indexOf('http%3A%2F%2Flocalhost') > -1) {
          // If localhost, assume we're working from a local Jupyter server and remove `/hub`
          first = [hubUrl, 'git-sync'].join('/')
        } else {
          first = [hubUrl, 'hub', 'user-redirect', 'git-sync'].join('/')
        }
        href = first + '?' + binder2Jupyterhub(href);
      } else {
        // If interact button isn't binderhub, assume it's jupyterhub
        // If JupyterHub links, we only need to replace the hub url
        href = href.replace("https://datahub.berkeley.edu", hubUrl);
        if (hubUrl.indexOf('http%3A%2F%2Flocalhost') > -1) {
          // Assume we're working from a local Jupyter server and remove `/hub`
          href = href.replace("/hub/user-redirect", "");
        }
      }
      link.setAttribute('href', decodeURIComponent(href));

      // Add text after interact link saying where we're launching
      hubUrlNoHttp = decodeURIComponent(hubUrl).replace('http://', '').replace('https://', '');
      link.insertAdjacentHTML('afterend', '<div class="interact-context">on ' + hubUrlNoHttp + '</div>');

      // Update internal links so we retain the hub url
      addParamToInternalLinks(hubUrl);
    }
}

runWhenDOMLoaded(updateInteractLink)
document.addEventListener('turbolinks:load', updateInteractLink)
</script>


  <!-- Lunr search code - will only be executed on the /search page -->
  <script src="/modules-textbook/assets/js/lunr/lunr.min.js" type="text/javascript"></script>
  <script>var initQuery = function() {
  // See if we have a search box
  var searchInput = document.querySelector('input#lunr_search');
  if (searchInput === null) {
    return;
  }

  // Function to parse our lunr cache
  var idx = lunr(function () {
    this.field('title')
    this.field('excerpt')
    this.field('categories')
    this.field('tags')
    this.ref('id')

    this.pipeline.remove(lunr.trimmer)

    for (var item in store) {
      this.add({
        title: store[item].title,
        excerpt: store[item].excerpt,
        categories: store[item].categories,
        tags: store[item].tags,
        id: item
      })
    }
  });

  // Run search upon keyup
  searchInput.addEventListener('keyup', function () {
    var resultdiv = document.querySelector('#results');
    var query = document.querySelector("input#lunr_search").value.toLowerCase();
    var result =
      idx.query(function (q) {
        query.split(lunr.tokenizer.separator).forEach(function (term) {
          q.term(term, { boost: 100 })
          if(query.lastIndexOf(" ") != query.length-1){
            q.term(term, {  usePipeline: false, wildcard: lunr.Query.wildcard.TRAILING, boost: 10 })
          }
          if (term != ""){
            q.term(term, {  usePipeline: false, editDistance: 1, boost: 1 })
          }
        })
      });

      // Empty the results div
      while (resultdiv.firstChild) {
        resultdiv.removeChild(resultdiv.firstChild);
      }

    resultdiv.insertAdjacentHTML('afterbegin', '<p class="results__found">'+result.length+' Result(s) found</p>');
    for (var item in result) {
      var ref = result[item].ref;
      if(store[ref].teaser){
        var searchitem =
          '<div class="list__item">'+
            '<article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">'+
              '<h2 class="archive__item-title" itemprop="headline">'+
                '<a href="'+store[ref].url+'" rel="permalink">'+store[ref].title+'</a>'+
              '</h2>'+
              '<div class="archive__item-teaser">'+
                '<img src="'+store[ref].teaser+'" alt="">'+
              '</div>'+
              '<p class="archive__item-excerpt" itemprop="description">'+store[ref].excerpt.split(" ").splice(0,20).join(" ")+'...</p>'+
            '</article>'+
          '</div>';
      }
      else{
    	  var searchitem =
          '<div class="list__item">'+
            '<article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">'+
              '<h2 class="archive__item-title" itemprop="headline">'+
                '<a href="'+store[ref].url+'" rel="permalink">'+store[ref].title+'</a>'+
              '</h2>'+
              '<p class="archive__item-excerpt" itemprop="description">'+store[ref].excerpt.split(" ").splice(0,20).join(" ")+'...</p>'+
            '</article>'+
          '</div>';
      }
      resultdiv.insertAdjacentHTML('beforeend', searchitem);
    }
  });
};

initFunction(initQuery);
</script>
</head>

  <body>
    <!-- .js-show-sidebar shows sidebar by default -->
    <div id="js-textbook" class="c-textbook js-show-sidebar">
      



<nav id="js-sidebar" class="c-textbook__sidebar">
  <a href="https://ds-modules.github.io/modules-textbook"><img src="/modules-textbook/images/logo/logo.png" class="textbook_logo" id="sidebar-logo" data-turbolinks-permanent/></a>
  <h2 class="c-sidebar__title">UC Berkeley Data Science Modules</h2>
  <ul class="c-sidebar__chapters">
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/modules-textbook/intro.html"
        >
          
          Home
        </a>

        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="https://github.com/ds-modules/"
        >
          
          DSEP Modules Repository
        </a>

        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="https://ds-modules.github.io/curriculum-guide/intro"
        >
          
          Data Science Curriculum Guide
        </a>

        
      </li>

      
    
      
      
        <li class="c-sidebar__chapter"><a class="c-sidebar__entry" href="/modules-textbook/search.html">Search</a></li>
        
      
      
        <li class="c-sidebar__divider"></li>
        
      
      
        <li><h2 class="c-sidebar__title">Introduction</li>
        
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/modules-textbook/introduction/ds-intro.html"
        >
          
          Data Science in Python and Jupyter
        </a>

        

          
          
          
          

          

          <ul class="c-sidebar__sections ">
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/modules-textbook/introduction/intro-module-final.html"
                >
                  
                  Intro to Python and Jupyter
                </a>

                
                

              </li>
              
            
          </ul>
        
      </li>

      
    
      
      
        <li><h2 class="c-sidebar__title">Social Sciences</li>
        
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/modules-textbook/legalst-190/legalst-190-intro.html"
        >
          
          Legal Studies
        </a>

        

          
          
          
          

          

          <ul class="c-sidebar__sections u-hidden-visually">
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/modules-textbook/legalst-190/1-18.html"
                >
                  
                  Intro to Python
                </a>

                
                

              </li>
              
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/modules-textbook/legalst-190/ps1/SF_Crime_PSET1.html"
                >
                  
                  Problem Set 1
                </a>

                
                

              </li>
              
            
          </ul>
        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/modules-textbook/psych-167ac/psych-167ac-intro.html"
        >
          
          Psychology
        </a>

        

          
          
          
          

          

          <ul class="c-sidebar__sections u-hidden-visually">
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/modules-textbook/psych-167ac/01-intro.html"
                >
                  
                  Introduction
                </a>

                
                

              </li>
              
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/modules-textbook/psych-167ac/02-correlation-regression.html"
                >
                  
                  Correlation & Regression
                </a>

                
                

              </li>
              
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/modules-textbook/psych-167ac/03-my-project.html"
                >
                  
                  My Project
                </a>

                
                

              </li>
              
            
          </ul>
        
      </li>

      
    
      
      
        <li><h2 class="c-sidebar__title">Arts and Humanities</li>
        
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/modules-textbook/xenglish-r1a/xenglish-r1a-intro.html"
        >
          
          English
        </a>

        

          
          
          
          

          

          <ul class="c-sidebar__sections u-hidden-visually">
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/modules-textbook/xenglish-r1a/01-Chinatowns.html"
                >
                  
                  Chinatowns
                </a>

                
                

              </li>
              
            
          </ul>
        
      </li>

      
    
      
      
        <li><h2 class="c-sidebar__title">Professional</li>
        
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/modules-textbook/cp-101/cp-101-intro.html"
        >
          
          City Planning
        </a>

        

          
          
          
          

          

          <ul class="c-sidebar__sections u-hidden-visually">
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/modules-textbook/cp-101/lab07/lab07.html"
                >
                  
                  Lab 7
                </a>

                
                

              </li>
              
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/modules-textbook/cp-101/lab08/lab08.html"
                >
                  
                  Lab 8
                </a>

                
                

              </li>
              
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/modules-textbook/cp-101/lab09/lab09.html"
                >
                  
                  Lab 9
                </a>

                
                

              </li>
              
            
              
              

              <li class="c-sidebar__section">
                <a class="c-sidebar__entry "
                  href="/modules-textbook/cp-101/lab10/lab10.html"
                >
                  
                  Lab 10
                </a>

                
                

              </li>
              
            
          </ul>
        
      </li>

      
    
  </ul>
  <p class="sidebar_footer">Powered by <a href="https://github.com/jupyter/jupyter-book">Jupyter Book</a></p>
</nav>

      
      <!-- Shamelessly copied from minimal mistakes -->


<!-- TOC will only show up if it has at least one item -->


  <aside class="sidebar__right">
    <nav class="onthispage">
      <header><h4 class="nav__title"><i class="fa fa-list"></i>   On this page</h4></header>
      <ul class="toc__menu">
  <li><a href="#1-introduction-">1. Introduction </a></li>
  <li><a href="#2-getting-the-data-">2. Getting the Data </a></li>
  <li><a href="#3-descriptive-statistics-">3. Descriptive Statistics </a></li>
</ul>
    </nav>
  </aside>


      
      <main class="c-textbook__page" tabindex="-1">
          <div class="o-wrapper">
            <div class="c-sidebar-toggle">
  <!-- We show the sidebar by default so we use .is-active -->
  <button
    id="js-sidebar-toggle"
    class="hamburger hamburger--arrowalt is-active"
  >
    <span class="hamburger-box">
      <span class="hamburger-inner"></span>
    </span>
    <span class="c-sidebar-toggle__label">Toggle Sidebar</span>
  </button>
</div>

            
<div class="buttons">
<a href="/modules-textbook/content/legal_studies/ps1/SF_Crime_PSET1.ipynb" download>
<button id="interact-button-download" class="interact-button">Download</button>
</a>

<button id="interact-button-thebelab" class="interact-button">Thebelab</button>








<a href="https://mybinder.org/v2/gh/ds-modules/modules-textbook/master?filepath=content%2Flegal_studies%2Fps1%2FSF_Crime_PSET1.ipynb"><button class="interact-button" id="interact-button-binder"><img class="interact-button-logo" src="/modules-textbook/assets/images/logo_binder.svg" alt="Interact" />Binder</button></a>






<a href="https://datahub.berkeley.edu/hub/user-redirect/git-pull?repo=https://github.com//ds-modules/modules-textbook&amp;branch=master&amp;subPath=content%2Flegal_studies%2Fps1%2FSF_Crime_PSET1.ipynb&amp;app=notebook"><button class="interact-button" id="interact-button-jupyterhub"><img class="interact-button-logo" src="/modules-textbook/assets/images/logo_jupyterhub.svg" alt="Interact" />DataHub</button></a>



</div>


            <div class="c-textbook__content">
              <h1 id="sf-crime-pset-1">SF Crime PSET 1</h1>

<ol>
  <li><a href="#intro">Introduction</a></li>
  <li><a href="#data">Getting the Data</a></li>
  <li><a href="#stats">Descriptive Statistics</a></li>
  <li><a href="#gis">Geographic Information Systems</a></li>
  <li><a href="#dq">Discussion Questions</a></li>
</ol>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># imports</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">datascience</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">folium</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">branca.colormap</span> <span class="kn">import</span> <span class="n">linear</span>
<span class="kn">import</span> <span class="nn">branca.colormap</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
</code></pre></div></div>

<h2 id="1-introduction-">1. Introduction <a id="intro"></a></h2>

<p>For this lab, we will be working with the San Francisco Police Department’s Incident Database. The dataset contains up-to-date information on incidents reported to the SFPD. Each observation is tagged with information about the incident’s location, type of infraaction, and date/time. In this lab you will:</p>

<ol>
  <li>Download the data through an Application Programming Interface (API)</li>
  <li>Explore the data with summary and descriptive statistics</li>
  <li>Map the incidents</li>
</ol>

<p>Make sure to start early and ask lots of questions! The dataset, along with other publicaly available data, is available at: https://data.sfgov.org/Public-Safety/Police-Department-Incidents/tmnf-yvry</p>

<h2 id="2-getting-the-data-">2. Getting the Data <a id="data"></a></h2>

<p>Write code that pulls the data into your environment with an API call. Here is the link to the API: https://data.sfgov.org/resource/PdId.json</p>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sf_police</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">'Police_Department_Sample_Incidents.csv'</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">sf_police</span><span class="p">)</span>
<span class="n">df</span>
</code></pre></div></div>

<div class="output output_html">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>incidntnum</th>
      <th>category</th>
      <th>descript</th>
      <th>dayofweek</th>
      <th>date</th>
      <th>time</th>
      <th>pddistrict</th>
      <th>resolution</th>
      <th>address</th>
      <th>x</th>
      <th>y</th>
      <th>location</th>
      <th>pdid</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>30325834</td>
      <td>OTHER OFFENSES</td>
      <td>POSSESSION OF BURGLARY TOOLS</td>
      <td>Wednesday</td>
      <td>03/19/2003</td>
      <td>01:06:00</td>
      <td>MISSION</td>
      <td>ARREST, BOOKED</td>
      <td>3100 Block of CESAR CHAVEZ ST</td>
      <td>-122.412594</td>
      <td>37.748166</td>
      <td>(37.7481660056223, -122.412594354828)</td>
      <td>3.032583e+12</td>
    </tr>
    <tr>
      <th>1</th>
      <td>150119979</td>
      <td>OTHER OFFENSES</td>
      <td>TRAFFIC VIOLATION</td>
      <td>Sunday</td>
      <td>02/08/2015</td>
      <td>03:26:00</td>
      <td>INGLESIDE</td>
      <td>ARREST, BOOKED</td>
      <td>MISSION ST / COLLEGE AV</td>
      <td>-122.424702</td>
      <td>37.735370</td>
      <td>(37.7353699090873, -122.424702079332)</td>
      <td>1.501200e+13</td>
    </tr>
    <tr>
      <th>2</th>
      <td>130507219</td>
      <td>OTHER OFFENSES</td>
      <td>RESISTING ARREST</td>
      <td>Thursday</td>
      <td>06/20/2013</td>
      <td>15:22:00</td>
      <td>CENTRAL</td>
      <td>ARREST, CITED</td>
      <td>200 Block of SACRAMENTO ST</td>
      <td>-122.398405</td>
      <td>37.794412</td>
      <td>(37.7944120086129, -122.39840549202)</td>
      <td>1.305072e+13</td>
    </tr>
    <tr>
      <th>3</th>
      <td>40459865</td>
      <td>OTHER OFFENSES</td>
      <td>LOST/STOLEN LICENSE PLATE</td>
      <td>Wednesday</td>
      <td>04/21/2004</td>
      <td>11:00:00</td>
      <td>INGLESIDE</td>
      <td>NONE</td>
      <td>600 Block of 28TH ST</td>
      <td>-122.436797</td>
      <td>37.744751</td>
      <td>(37.7447510901057, -122.436796627403)</td>
      <td>4.045987e+12</td>
    </tr>
    <tr>
      <th>4</th>
      <td>70067529</td>
      <td>FORGERY/COUNTERFEITING</td>
      <td>CHECKS, MAKE OR PASS FICTITIOUS</td>
      <td>Friday</td>
      <td>01/05/2007</td>
      <td>12:00:00</td>
      <td>INGLESIDE</td>
      <td>NONE</td>
      <td>1600 Block of BURROWS ST</td>
      <td>-122.419412</td>
      <td>37.724888</td>
      <td>(37.7248875198607, -122.41941248624)</td>
      <td>7.006753e+12</td>
    </tr>
    <tr>
      <th>5</th>
      <td>106103162</td>
      <td>LARCENY/THEFT</td>
      <td>PETTY THEFT OF PROPERTY</td>
      <td>Thursday</td>
      <td>08/19/2010</td>
      <td>14:05:00</td>
      <td>BAYVIEW</td>
      <td>NONE</td>
      <td>1300 Block of REVERE AV</td>
      <td>-122.385545</td>
      <td>37.728980</td>
      <td>(37.728979731984, -122.385545453301)</td>
      <td>1.061032e+13</td>
    </tr>
    <tr>
      <th>6</th>
      <td>120276214</td>
      <td>ASSAULT</td>
      <td>BATTERY WITH SERIOUS INJURIES</td>
      <td>Saturday</td>
      <td>04/07/2012</td>
      <td>03:05:00</td>
      <td>PARK</td>
      <td>ARREST, BOOKED</td>
      <td>500 Block of CENTRAL AV</td>
      <td>-122.444569</td>
      <td>37.774618</td>
      <td>(37.7746181158166, -122.444568876114)</td>
      <td>1.202762e+13</td>
    </tr>
    <tr>
      <th>7</th>
      <td>170096642</td>
      <td>LARCENY/THEFT</td>
      <td>PETTY THEFT SHOPLIFTING</td>
      <td>Friday</td>
      <td>02/03/2017</td>
      <td>15:00:00</td>
      <td>MISSION</td>
      <td>NONE</td>
      <td>400 Block of CASTRO ST</td>
      <td>-122.435150</td>
      <td>37.761760</td>
      <td>(37.761759724359806, -122.43515009981229)</td>
      <td>1.700966e+13</td>
    </tr>
    <tr>
      <th>8</th>
      <td>40822096</td>
      <td>OTHER OFFENSES</td>
      <td>DRIVERS LICENSE, SUSPENDED OR REVOKED</td>
      <td>Monday</td>
      <td>07/19/2004</td>
      <td>13:00:00</td>
      <td>TENDERLOIN</td>
      <td>ARREST, CITED</td>
      <td>EDDY ST / HYDE ST</td>
      <td>-122.415885</td>
      <td>37.783516</td>
      <td>(37.7835160563924, -122.415885065795)</td>
      <td>4.082210e+12</td>
    </tr>
    <tr>
      <th>9</th>
      <td>100487776</td>
      <td>LARCENY/THEFT</td>
      <td>PETTY THEFT FROM A BUILDING</td>
      <td>Friday</td>
      <td>05/07/2010</td>
      <td>20:30:00</td>
      <td>SOUTHERN</td>
      <td>NONE</td>
      <td>400 Block of MINNA ST</td>
      <td>-122.407387</td>
      <td>37.781069</td>
      <td>(37.7810688918781, -122.407387172098)</td>
      <td>1.004878e+13</td>
    </tr>
    <tr>
      <th>10</th>
      <td>160459555</td>
      <td>ROBBERY</td>
      <td>ROBBERY OF A SERVICE STATION WITH A GUN</td>
      <td>Sunday</td>
      <td>06/05/2016</td>
      <td>18:35:00</td>
      <td>TARAVAL</td>
      <td>NONE</td>
      <td>1100 Block of JUNIPERO SERRA BL</td>
      <td>-122.472389</td>
      <td>37.717501</td>
      <td>(37.7175010456614, -122.4723890410333)</td>
      <td>1.604596e+13</td>
    </tr>
    <tr>
      <th>11</th>
      <td>120107590</td>
      <td>LARCENY/THEFT</td>
      <td>GRAND THEFT BICYCLE</td>
      <td>Friday</td>
      <td>02/03/2012</td>
      <td>19:00:00</td>
      <td>RICHMOND</td>
      <td>NONE</td>
      <td>600 Block of 25TH AV</td>
      <td>-122.484596</td>
      <td>37.777213</td>
      <td>(37.7772129804302, -122.484595739169)</td>
      <td>1.201076e+13</td>
    </tr>
    <tr>
      <th>12</th>
      <td>100847910</td>
      <td>VANDALISM</td>
      <td>MALICIOUS MISCHIEF, VANDALISM</td>
      <td>Monday</td>
      <td>09/13/2010</td>
      <td>00:01:00</td>
      <td>MISSION</td>
      <td>NONE</td>
      <td>100 Block of GRANDVIEW AV</td>
      <td>-122.440412</td>
      <td>37.755446</td>
      <td>(37.7554456064661, -122.440411847156)</td>
      <td>1.008479e+13</td>
    </tr>
    <tr>
      <th>13</th>
      <td>30802688</td>
      <td>LARCENY/THEFT</td>
      <td>PETTY THEFT FROM LOCKED AUTO</td>
      <td>Saturday</td>
      <td>07/05/2003</td>
      <td>16:00:00</td>
      <td>NORTHERN</td>
      <td>NONE</td>
      <td>FRANKLIN ST / ELLIS ST</td>
      <td>-122.422654</td>
      <td>37.783620</td>
      <td>(37.7836201224122, -122.422654162991)</td>
      <td>3.080269e+12</td>
    </tr>
    <tr>
      <th>14</th>
      <td>60098528</td>
      <td>NON-CRIMINAL</td>
      <td>TARASOFF REPORT</td>
      <td>Thursday</td>
      <td>01/26/2006</td>
      <td>09:15:00</td>
      <td>TENDERLOIN</td>
      <td>NONE</td>
      <td>300 Block of EDDY ST</td>
      <td>-122.413791</td>
      <td>37.783837</td>
      <td>(37.7838365565348, -122.413790972781)</td>
      <td>6.009853e+12</td>
    </tr>
    <tr>
      <th>15</th>
      <td>130149833</td>
      <td>MISSING PERSON</td>
      <td>MISSING JUVENILE</td>
      <td>Wednesday</td>
      <td>02/20/2013</td>
      <td>09:00:00</td>
      <td>PARK</td>
      <td>LOCATED</td>
      <td>100 Block of BELVEDERE ST</td>
      <td>-122.449329</td>
      <td>37.767774</td>
      <td>(37.7677738874748, -122.449328648219)</td>
      <td>1.301498e+13</td>
    </tr>
    <tr>
      <th>16</th>
      <td>41322974</td>
      <td>LARCENY/THEFT</td>
      <td>GRAND THEFT FROM A BUILDING</td>
      <td>Thursday</td>
      <td>11/18/2004</td>
      <td>17:00:00</td>
      <td>CENTRAL</td>
      <td>NONE</td>
      <td>900 Block of MASON ST</td>
      <td>-122.410846</td>
      <td>37.792316</td>
      <td>(37.7923158747647, -122.410845624227)</td>
      <td>4.132297e+12</td>
    </tr>
    <tr>
      <th>17</th>
      <td>100174597</td>
      <td>LARCENY/THEFT</td>
      <td>PETTY THEFT SHOPLIFTING</td>
      <td>Sunday</td>
      <td>02/21/2010</td>
      <td>17:20:00</td>
      <td>SOUTHERN</td>
      <td>ARREST, CITED</td>
      <td>800 Block of MARKET ST</td>
      <td>-122.407634</td>
      <td>37.784189</td>
      <td>(37.7841893501425, -122.407633520742)</td>
      <td>1.001746e+13</td>
    </tr>
    <tr>
      <th>18</th>
      <td>130034347</td>
      <td>OTHER OFFENSES</td>
      <td>CONSPIRACY</td>
      <td>Sunday</td>
      <td>01/13/2013</td>
      <td>01:03:00</td>
      <td>TENDERLOIN</td>
      <td>ARREST, BOOKED</td>
      <td>100 Block of ELLIS ST</td>
      <td>-122.408271</td>
      <td>37.785494</td>
      <td>(37.7854941424186, -122.408270724034)</td>
      <td>1.300343e+13</td>
    </tr>
    <tr>
      <th>19</th>
      <td>150034220</td>
      <td>VEHICLE THEFT</td>
      <td>STOLEN AUTOMOBILE</td>
      <td>Sunday</td>
      <td>01/11/2015</td>
      <td>23:00:00</td>
      <td>INGLESIDE</td>
      <td>NONE</td>
      <td>1200 Block of ALEMANY BL</td>
      <td>-122.432269</td>
      <td>37.730139</td>
      <td>(37.7301394309025, -122.432268894425)</td>
      <td>1.500342e+13</td>
    </tr>
    <tr>
      <th>20</th>
      <td>101033821</td>
      <td>DRUG/NARCOTIC</td>
      <td>POSSESSION OF BASE/ROCK COCAINE FOR SALE</td>
      <td>Saturday</td>
      <td>11/06/2010</td>
      <td>22:00:00</td>
      <td>TENDERLOIN</td>
      <td>ARREST, BOOKED</td>
      <td>OFARRELL ST / JONES ST</td>
      <td>-122.412971</td>
      <td>37.785788</td>
      <td>(37.7857883766888, -122.412970537591)</td>
      <td>1.010338e+13</td>
    </tr>
    <tr>
      <th>21</th>
      <td>130473234</td>
      <td>SUSPICIOUS OCC</td>
      <td>SUSPICIOUS OCCURRENCE</td>
      <td>Saturday</td>
      <td>06/08/2013</td>
      <td>18:00:00</td>
      <td>RICHMOND</td>
      <td>UNFOUNDED</td>
      <td>300 Block of 7TH AV</td>
      <td>-122.465490</td>
      <td>37.781907</td>
      <td>(37.7819066124774, -122.465490381382)</td>
      <td>1.304732e+13</td>
    </tr>
    <tr>
      <th>22</th>
      <td>96024454</td>
      <td>LARCENY/THEFT</td>
      <td>GRAND THEFT FROM LOCKED AUTO</td>
      <td>Monday</td>
      <td>04/06/2009</td>
      <td>14:30:00</td>
      <td>INGLESIDE</td>
      <td>NONE</td>
      <td>1500 Block of TREAT AV</td>
      <td>-122.412506</td>
      <td>37.745680</td>
      <td>(37.7456802881475, -122.41250614556)</td>
      <td>9.602445e+12</td>
    </tr>
    <tr>
      <th>23</th>
      <td>70430788</td>
      <td>LARCENY/THEFT</td>
      <td>GRAND THEFT FROM PERSON</td>
      <td>Thursday</td>
      <td>04/26/2007</td>
      <td>13:15:00</td>
      <td>NORTHERN</td>
      <td>NONE</td>
      <td>600 Block of EDDY ST</td>
      <td>-122.418382</td>
      <td>37.783258</td>
      <td>(37.7832583770949, -122.418382008607)</td>
      <td>7.043079e+12</td>
    </tr>
    <tr>
      <th>24</th>
      <td>171022519</td>
      <td>LARCENY/THEFT</td>
      <td>LOST PROPERTY, GRAND THEFT</td>
      <td>Monday</td>
      <td>12/18/2017</td>
      <td>18:45:00</td>
      <td>CENTRAL</td>
      <td>NONE</td>
      <td>CHESTNUT ST / POWELL ST</td>
      <td>-122.411587</td>
      <td>37.803962</td>
      <td>(37.80396234588253, -122.41158662771912)</td>
      <td>1.710225e+13</td>
    </tr>
    <tr>
      <th>25</th>
      <td>160131305</td>
      <td>LARCENY/THEFT</td>
      <td>PETTY THEFT FROM LOCKED AUTO</td>
      <td>Saturday</td>
      <td>02/13/2016</td>
      <td>16:00:00</td>
      <td>SOUTHERN</td>
      <td>NONE</td>
      <td>HARRIET ST / FOLSOM ST</td>
      <td>-122.406151</td>
      <td>37.778081</td>
      <td>(37.77808112789121, -122.40615148216322)</td>
      <td>1.601313e+13</td>
    </tr>
    <tr>
      <th>26</th>
      <td>100587291</td>
      <td>SUSPICIOUS OCC</td>
      <td>SUSPICIOUS OCCURRENCE</td>
      <td>Saturday</td>
      <td>06/26/2010</td>
      <td>03:55:00</td>
      <td>MISSION</td>
      <td>NONE</td>
      <td>3000 Block of 16TH ST</td>
      <td>-122.421083</td>
      <td>37.764911</td>
      <td>(37.764910844226, -122.421082850193)</td>
      <td>1.005873e+13</td>
    </tr>
    <tr>
      <th>27</th>
      <td>50103165</td>
      <td>LARCENY/THEFT</td>
      <td>GRAND THEFT FROM LOCKED AUTO</td>
      <td>Wednesday</td>
      <td>01/26/2005</td>
      <td>07:45:00</td>
      <td>CENTRAL</td>
      <td>NONE</td>
      <td>300 Block of CLAY ST</td>
      <td>-122.398573</td>
      <td>37.795292</td>
      <td>(37.7952923975164, -122.398573051955)</td>
      <td>5.010317e+12</td>
    </tr>
    <tr>
      <th>28</th>
      <td>80437166</td>
      <td>OTHER OFFENSES</td>
      <td>DRIVERS LICENSE, SUSPENDED OR REVOKED</td>
      <td>Saturday</td>
      <td>04/26/2008</td>
      <td>17:16:00</td>
      <td>BAYVIEW</td>
      <td>ARREST, CITED</td>
      <td>CESAR CHAVEZ ST / KANSAS ST</td>
      <td>-122.402063</td>
      <td>37.749398</td>
      <td>(37.7493979879214, -122.402063377785)</td>
      <td>8.043717e+12</td>
    </tr>
    <tr>
      <th>29</th>
      <td>110218113</td>
      <td>OTHER OFFENSES</td>
      <td>MISCELLANEOUS INVESTIGATION</td>
      <td>Wednesday</td>
      <td>03/16/2011</td>
      <td>10:30:00</td>
      <td>PARK</td>
      <td>NONE</td>
      <td>700 Block of CLAYTON ST</td>
      <td>-122.448266</td>
      <td>37.767909</td>
      <td>(37.7679091107584, -122.448266122025)</td>
      <td>1.102181e+13</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>9970</th>
      <td>90773615</td>
      <td>VEHICLE THEFT</td>
      <td>STOLEN AUTOMOBILE</td>
      <td>Wednesday</td>
      <td>07/29/2009</td>
      <td>07:00:00</td>
      <td>SOUTHERN</td>
      <td>NONE</td>
      <td>6TH ST / STEVENSON ST</td>
      <td>-122.409696</td>
      <td>37.781754</td>
      <td>(37.7817540588712, -122.409696355558)</td>
      <td>9.077362e+12</td>
    </tr>
    <tr>
      <th>9971</th>
      <td>171009573</td>
      <td>SUSPICIOUS OCC</td>
      <td>SUSPICIOUS OCCURRENCE</td>
      <td>Thursday</td>
      <td>12/14/2017</td>
      <td>09:03:00</td>
      <td>MISSION</td>
      <td>NONE</td>
      <td>DUBOCE AV / WOODWARD ST</td>
      <td>-122.420948</td>
      <td>37.769979</td>
      <td>(37.76997927943881, -122.42094803971935)</td>
      <td>1.710096e+13</td>
    </tr>
    <tr>
      <th>9972</th>
      <td>30696867</td>
      <td>LARCENY/THEFT</td>
      <td>GRAND THEFT FROM LOCKED AUTO</td>
      <td>Sunday</td>
      <td>06/08/2003</td>
      <td>02:30:00</td>
      <td>BAYVIEW</td>
      <td>NONE</td>
      <td>400 Block of BARNEVELD AV</td>
      <td>-122.403360</td>
      <td>37.741657</td>
      <td>(37.7416571720538, -122.403359514965)</td>
      <td>3.069687e+12</td>
    </tr>
    <tr>
      <th>9973</th>
      <td>66005553</td>
      <td>LARCENY/THEFT</td>
      <td>GRAND THEFT FROM LOCKED AUTO</td>
      <td>Wednesday</td>
      <td>01/25/2006</td>
      <td>22:00:00</td>
      <td>SOUTHERN</td>
      <td>NONE</td>
      <td>800 Block of FOLSOM ST</td>
      <td>-122.402246</td>
      <td>37.781089</td>
      <td>(37.7810888153345, -122.402246029097)</td>
      <td>6.600555e+12</td>
    </tr>
    <tr>
      <th>9974</th>
      <td>41309477</td>
      <td>WARRANTS</td>
      <td>WARRANT ARREST</td>
      <td>Tuesday</td>
      <td>11/16/2004</td>
      <td>13:20:00</td>
      <td>MISSION</td>
      <td>ARREST, BOOKED</td>
      <td>16TH ST / HOFF ST</td>
      <td>-122.420580</td>
      <td>37.764997</td>
      <td>(37.7649968622982, -122.420580440119)</td>
      <td>4.130948e+12</td>
    </tr>
    <tr>
      <th>9975</th>
      <td>130576957</td>
      <td>SUSPICIOUS OCC</td>
      <td>SUSPICIOUS OCCURRENCE</td>
      <td>Thursday</td>
      <td>07/11/2013</td>
      <td>23:00:00</td>
      <td>SOUTHERN</td>
      <td>NONE</td>
      <td>9TH ST / FOLSOM ST</td>
      <td>-122.411612</td>
      <td>37.773768</td>
      <td>(37.7737679567236, -122.411612378034)</td>
      <td>1.305770e+13</td>
    </tr>
    <tr>
      <th>9976</th>
      <td>61239785</td>
      <td>MISSING PERSON</td>
      <td>MISSING ADULT</td>
      <td>Monday</td>
      <td>11/20/2006</td>
      <td>05:30:00</td>
      <td>BAYVIEW</td>
      <td>LOCATED</td>
      <td>1400 Block of PHELPS ST</td>
      <td>-122.394439</td>
      <td>37.736444</td>
      <td>(37.7364438996732, -122.394438859914)</td>
      <td>6.123979e+12</td>
    </tr>
    <tr>
      <th>9977</th>
      <td>130969346</td>
      <td>ASSAULT</td>
      <td>AGGRAVATED ASSAULT OF POLICE OFFICER,BODILY FORCE</td>
      <td>Friday</td>
      <td>11/15/2013</td>
      <td>15:41:00</td>
      <td>SOUTHERN</td>
      <td>ARREST, BOOKED</td>
      <td>800 Block of BRYANT ST</td>
      <td>-122.403405</td>
      <td>37.775421</td>
      <td>(37.775420706711, -122.403404791479)</td>
      <td>1.309693e+13</td>
    </tr>
    <tr>
      <th>9978</th>
      <td>130270018</td>
      <td>LARCENY/THEFT</td>
      <td>PETTY THEFT FROM A BUILDING</td>
      <td>Thursday</td>
      <td>03/21/2013</td>
      <td>01:02:00</td>
      <td>PARK</td>
      <td>NONE</td>
      <td>4100 Block of 17TH ST</td>
      <td>-122.437906</td>
      <td>37.762376</td>
      <td>(37.7623763079838, -122.437905731311)</td>
      <td>1.302700e+13</td>
    </tr>
    <tr>
      <th>9979</th>
      <td>160168693</td>
      <td>VANDALISM</td>
      <td>MALICIOUS MISCHIEF, VANDALISM</td>
      <td>Friday</td>
      <td>02/26/2016</td>
      <td>15:25:00</td>
      <td>TARAVAL</td>
      <td>ARREST, BOOKED</td>
      <td>2300 Block of NORIEGA ST</td>
      <td>-122.488808</td>
      <td>37.753752</td>
      <td>(37.75375194458355, -122.48880789335784)</td>
      <td>1.601687e+13</td>
    </tr>
    <tr>
      <th>9980</th>
      <td>40988529</td>
      <td>LARCENY/THEFT</td>
      <td>PETTY THEFT WITH PRIOR</td>
      <td>Sunday</td>
      <td>08/29/2004</td>
      <td>17:00:00</td>
      <td>TENDERLOIN</td>
      <td>ARREST, BOOKED</td>
      <td>100 Block of OFARRELL ST</td>
      <td>-122.407244</td>
      <td>37.786565</td>
      <td>(37.7865647607685, -122.407244087032)</td>
      <td>4.098853e+12</td>
    </tr>
    <tr>
      <th>9981</th>
      <td>70576586</td>
      <td>NON-CRIMINAL</td>
      <td>LOST PROPERTY</td>
      <td>Wednesday</td>
      <td>03/07/2007</td>
      <td>08:40:00</td>
      <td>SOUTHERN</td>
      <td>NONE</td>
      <td>800 Block of BRYANT ST</td>
      <td>-122.403405</td>
      <td>37.775421</td>
      <td>(37.775420706711, -122.403404791479)</td>
      <td>7.057659e+12</td>
    </tr>
    <tr>
      <th>9982</th>
      <td>136168471</td>
      <td>LARCENY/THEFT</td>
      <td>GRAND THEFT FROM LOCKED AUTO</td>
      <td>Saturday</td>
      <td>09/14/2013</td>
      <td>13:00:00</td>
      <td>SOUTHERN</td>
      <td>NONE</td>
      <td>200 Block of INTERSTATE80 HY</td>
      <td>-122.365565</td>
      <td>37.809671</td>
      <td>(37.8096707013239, -122.365565425353)</td>
      <td>1.361685e+13</td>
    </tr>
    <tr>
      <th>9983</th>
      <td>110861637</td>
      <td>RECOVERED VEHICLE</td>
      <td>RECOVERED VEHICLE - STOLEN OUTSIDE SF</td>
      <td>Tuesday</td>
      <td>10/25/2011</td>
      <td>14:43:00</td>
      <td>BAYVIEW</td>
      <td>NONE</td>
      <td>1300 Block of INGALLS ST</td>
      <td>-122.382589</td>
      <td>37.730465</td>
      <td>(37.7304652920239, -122.382588718232)</td>
      <td>1.108616e+13</td>
    </tr>
    <tr>
      <th>9984</th>
      <td>40345587</td>
      <td>VEHICLE THEFT</td>
      <td>STOLEN AUTOMOBILE</td>
      <td>Wednesday</td>
      <td>03/24/2004</td>
      <td>21:00:00</td>
      <td>MISSION</td>
      <td>NONE</td>
      <td>24TH ST / POTRERO AV</td>
      <td>-122.406338</td>
      <td>37.753004</td>
      <td>(37.7530042877269, -122.406338412693)</td>
      <td>4.034559e+12</td>
    </tr>
    <tr>
      <th>9985</th>
      <td>140819054</td>
      <td>OTHER OFFENSES</td>
      <td>DRIVERS LICENSE, SUSPENDED OR REVOKED</td>
      <td>Sunday</td>
      <td>09/28/2014</td>
      <td>18:14:00</td>
      <td>RICHMOND</td>
      <td>ARREST, CITED</td>
      <td>FULTON ST / 30TH AV</td>
      <td>-122.489539</td>
      <td>37.772325</td>
      <td>(37.772324696627, -122.489538601712)</td>
      <td>1.408191e+13</td>
    </tr>
    <tr>
      <th>9986</th>
      <td>120709920</td>
      <td>BURGLARY</td>
      <td>BURGLARY, HOT PROWL, FORCIBLE ENTRY</td>
      <td>Wednesday</td>
      <td>09/05/2012</td>
      <td>10:06:00</td>
      <td>TARAVAL</td>
      <td>NONE</td>
      <td>100 Block of ELVERANO WY</td>
      <td>-122.461329</td>
      <td>37.730631</td>
      <td>(37.7306307008778, -122.461329068423)</td>
      <td>1.207099e+13</td>
    </tr>
    <tr>
      <th>9987</th>
      <td>90239322</td>
      <td>OTHER OFFENSES</td>
      <td>HARASSING PHONE CALLS</td>
      <td>Wednesday</td>
      <td>03/04/2009</td>
      <td>17:00:00</td>
      <td>CENTRAL</td>
      <td>NONE</td>
      <td>500 Block of GREEN ST</td>
      <td>-122.407932</td>
      <td>37.799577</td>
      <td>(37.7995771094892, -122.407931930502)</td>
      <td>9.023932e+12</td>
    </tr>
    <tr>
      <th>9988</th>
      <td>91140174</td>
      <td>ASSAULT</td>
      <td>BATTERY</td>
      <td>Thursday</td>
      <td>11/05/2009</td>
      <td>00:20:00</td>
      <td>BAYVIEW</td>
      <td>NONE</td>
      <td>17TH ST / TEXAS ST</td>
      <td>-122.395810</td>
      <td>37.765189</td>
      <td>(37.7651891001345, -122.395810281469)</td>
      <td>9.114017e+12</td>
    </tr>
    <tr>
      <th>9989</th>
      <td>80279742</td>
      <td>MISSING PERSON</td>
      <td>MISSING ADULT</td>
      <td>Friday</td>
      <td>03/07/2008</td>
      <td>23:30:00</td>
      <td>TENDERLOIN</td>
      <td>LOCATED</td>
      <td>300 Block of MASON ST</td>
      <td>-122.409661</td>
      <td>37.786439</td>
      <td>(37.7864394524764, -122.409660751795)</td>
      <td>8.027974e+12</td>
    </tr>
    <tr>
      <th>9990</th>
      <td>170927865</td>
      <td>ASSAULT</td>
      <td>BATTERY, FORMER SPOUSE OR DATING RELATIONSHIP</td>
      <td>Tuesday</td>
      <td>11/14/2017</td>
      <td>11:21:00</td>
      <td>SOUTHERN</td>
      <td>ARREST, BOOKED</td>
      <td>800 Block of BRYANT ST</td>
      <td>-122.403405</td>
      <td>37.775421</td>
      <td>(37.775420706711, -122.40340479147905)</td>
      <td>1.709279e+13</td>
    </tr>
    <tr>
      <th>9991</th>
      <td>160689633</td>
      <td>OTHER OFFENSES</td>
      <td>VIOLATION OF RESTRAINING ORDER</td>
      <td>Thursday</td>
      <td>08/25/2016</td>
      <td>09:00:00</td>
      <td>MISSION</td>
      <td>ARREST, BOOKED</td>
      <td>400 Block of ALVARADO ST</td>
      <td>-122.431019</td>
      <td>37.753944</td>
      <td>(37.753943582970585, -122.43101882896221)</td>
      <td>1.606896e+13</td>
    </tr>
    <tr>
      <th>9992</th>
      <td>80917287</td>
      <td>LARCENY/THEFT</td>
      <td>GRAND THEFT FROM LOCKED AUTO</td>
      <td>Thursday</td>
      <td>08/28/2008</td>
      <td>20:00:00</td>
      <td>NORTHERN</td>
      <td>NONE</td>
      <td>GOLDEN GATE AV / FILLMORE ST</td>
      <td>-122.431952</td>
      <td>37.779565</td>
      <td>(37.7795647498663, -122.431952436364)</td>
      <td>8.091729e+12</td>
    </tr>
    <tr>
      <th>9993</th>
      <td>40813841</td>
      <td>ASSAULT</td>
      <td>AGGRAVATED ASSAULT WITH A DEADLY WEAPON</td>
      <td>Saturday</td>
      <td>07/17/2004</td>
      <td>01:57:00</td>
      <td>MISSION</td>
      <td>ARREST, BOOKED</td>
      <td>16TH ST / HOFF ST</td>
      <td>-122.420580</td>
      <td>37.764997</td>
      <td>(37.7649968622982, -122.420580440119)</td>
      <td>4.081384e+12</td>
    </tr>
    <tr>
      <th>9994</th>
      <td>146231278</td>
      <td>LARCENY/THEFT</td>
      <td>GRAND THEFT FROM LOCKED AUTO</td>
      <td>Wednesday</td>
      <td>11/05/2014</td>
      <td>09:45:00</td>
      <td>CENTRAL</td>
      <td>NONE</td>
      <td>NORTHPOINT ST / LARKIN ST</td>
      <td>-122.422009</td>
      <td>37.805496</td>
      <td>(37.8054960276478, -122.422008950077)</td>
      <td>1.462313e+13</td>
    </tr>
    <tr>
      <th>9995</th>
      <td>140224390</td>
      <td>OTHER OFFENSES</td>
      <td>DRIVERS LICENSE, SUSPENDED OR REVOKED</td>
      <td>Sunday</td>
      <td>03/16/2014</td>
      <td>18:30:00</td>
      <td>INGLESIDE</td>
      <td>ARREST, CITED</td>
      <td>PERSIA AV / MADRID ST</td>
      <td>-122.432805</td>
      <td>37.721618</td>
      <td>(37.7216179113708, -122.432804728335)</td>
      <td>1.402244e+13</td>
    </tr>
    <tr>
      <th>9996</th>
      <td>140531101</td>
      <td>VEHICLE THEFT</td>
      <td>STOLEN AUTOMOBILE</td>
      <td>Thursday</td>
      <td>06/26/2014</td>
      <td>18:00:00</td>
      <td>SOUTHERN</td>
      <td>NONE</td>
      <td>0 Block of GOUGH ST</td>
      <td>-122.421206</td>
      <td>37.772531</td>
      <td>(37.7725305162673, -122.421205551035)</td>
      <td>1.405311e+13</td>
    </tr>
    <tr>
      <th>9997</th>
      <td>70416857</td>
      <td>BURGLARY</td>
      <td>BURGLARY OF RESIDENCE, UNLAWFUL ENTRY</td>
      <td>Monday</td>
      <td>04/23/2007</td>
      <td>09:15:00</td>
      <td>TARAVAL</td>
      <td>ARREST, BOOKED</td>
      <td>1700 Block of 44TH AV</td>
      <td>-122.503257</td>
      <td>37.753978</td>
      <td>(37.7539775965639, -122.503257080708)</td>
      <td>7.041686e+12</td>
    </tr>
    <tr>
      <th>9998</th>
      <td>130481259</td>
      <td>DRUG/NARCOTIC</td>
      <td>SALE OF MARIJUANA</td>
      <td>Tuesday</td>
      <td>06/11/2013</td>
      <td>16:07:00</td>
      <td>SOUTHERN</td>
      <td>ARREST, BOOKED</td>
      <td>900 Block of MARKET ST</td>
      <td>-122.408595</td>
      <td>37.783707</td>
      <td>(37.7837069301545, -122.408595110869)</td>
      <td>1.304813e+13</td>
    </tr>
    <tr>
      <th>9999</th>
      <td>146101245</td>
      <td>LARCENY/THEFT</td>
      <td>GRAND THEFT FROM UNLOCKED AUTO</td>
      <td>Sunday</td>
      <td>05/18/2014</td>
      <td>00:45:00</td>
      <td>SOUTHERN</td>
      <td>NONE</td>
      <td>HARRISON ST / 5TH ST</td>
      <td>-122.401846</td>
      <td>37.779032</td>
      <td>(37.7790324136251, -122.401846367522)</td>
      <td>1.461012e+13</td>
    </tr>
  </tbody>
</table>
<p>10000 rows × 13 columns</p>
</div>
</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#ts = Table(data.labels)</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">from</span> <span class="nn">sodapy</span> <span class="kn">import</span> <span class="n">Socrata</span>

<span class="c"># Unauthenticated client only works with public data sets. Note 'None'</span>
<span class="c"># in place of application token, and no username or password:</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">Socrata</span><span class="p">(</span><span class="s">"data.sfgov.org"</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

<span class="c"># Example authenticated client (needed for non-public datasets):</span>
<span class="c"># client = Socrata(data.sfgov.org,</span>
<span class="c">#                  MyAppToken,</span>
<span class="c">#                  userame="user@example.com",</span>
<span class="c">#                  password="AFakePassword")</span>

<span class="c"># First 2000 results, returned as JSON from API / converted to Python list of</span>
<span class="c"># dictionaries by sodapy.</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">"tmnf-yvry"</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>

<span class="c"># Convert to pandas DataFrame</span>
<span class="n">results_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_records</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</code></pre></div></div>

<div class="output output_traceback_line highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
    ---------------------------------------------------------------------------

    ModuleNotFoundError                       Traceback (most recent call last)

    &lt;ipython-input-17-c5d4879f0181&gt; in &lt;module&gt;()
          1 #ts = Table(data.labels)
          2 import pandas as pd
    ----&gt; 3 from sodapy import Socrata
          4 
          5 # Unauthenticated client only works with public data sets. Note 'None'


    ModuleNotFoundError: No module named 'sodapy'


</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">recs</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div class="output output_html">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>code</td>
    </tr>
    <tr>
      <th>1</th>
      <td>error</td>
    </tr>
    <tr>
      <th>2</th>
      <td>message</td>
    </tr>
    <tr>
      <th>3</th>
      <td>data</td>
    </tr>
    <tr>
      <th>4</th>
      <td>code</td>
    </tr>
  </tbody>
</table>
</div>
</div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">from_df</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s">'location'</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="n">data</span>
</code></pre></div></div>

<div class="output output_traceback_line highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
    ---------------------------------------------------------------------------

    NameError                                 Traceback (most recent call last)

    &lt;ipython-input-10-cf486b52f37a&gt; in &lt;module&gt;()
          1 # data = Table.from_df(df.drop('location', axis=1))
    ----&gt; 2 data
    

    NameError: name 'data' is not defined


</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">min</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">'date'</span><span class="p">])</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># making a table out of our json</span>
<span class="c"># DO NOT USE </span>
<span class="c">#data = Table.from_records(json_response)</span>
<span class="c">#data.show(3)</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span><span class="p">[</span><span class="s">'y'</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">'y'</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s">'float'</span><span class="p">)</span>
<span class="n">data</span><span class="p">[</span><span class="s">'x'</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">'x'</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s">'float'</span><span class="p">)</span>
</code></pre></div></div>

<div class="output output_traceback_line highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
    ---------------------------------------------------------------------------

    NameError                                 Traceback (most recent call last)

    &lt;ipython-input-9-8d418cf325f3&gt; in &lt;module&gt;()
    ----&gt; 1 data['y'] = data['y'].astype('float')
          2 data['x'] = data['x'].astype('float')


    NameError: name 'data' is not defined


</code></pre></div></div>

<p><strong>QUESTION: What are the advantages to downloading data this way, instead of with a point-and-click action?</strong></p>

<h2 id="3-descriptive-statistics-">3. Descriptive Statistics <a id="stats"></a></h2>

<p>Plot the number of incidents per year from 2000-2017 (choose the appropriate type of plot). Have crime rates increased or decreased in general?</p>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># creating a year column from the first four characters of the 'date' column</span>
<span class="n">data</span><span class="p">[</span><span class="s">'year'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">'date'</span><span class="p">])</span><span class="o">.</span><span class="n">year</span>
<span class="n">data</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">agg_on_year</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s">'year'</span><span class="p">)</span>
<span class="n">agg_on_year</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">agg_on_year</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s">'year'</span><span class="p">,</span> <span class="s">'count'</span><span class="p">)</span>
</code></pre></div></div>

<p>Looking just at 2017, what proportion of the total does each type of crime constitute? Use at least one table and at least one plot to support your answer.</p>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">agg_by_crime</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s">'year'</span><span class="p">,</span> <span class="mi">2017</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s">'category'</span><span class="p">)</span>
<span class="n">agg_by_crime</span><span class="p">[</span><span class="s">'proportion'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">count</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">agg_by_crime</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s">'count'</span><span class="p">))</span> <span class="k">for</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">agg_by_crime</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s">'count'</span><span class="p">)]</span>
<span class="n">agg_by_crime</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">'proportion'</span><span class="p">,</span> <span class="n">descending</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">agg_by_crime</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">'count'</span><span class="p">,</span> <span class="n">descending</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="s">'category'</span><span class="p">,</span> <span class="s">'proportion'</span><span class="p">)</span>
</code></pre></div></div>

<p>Is there a relationship between day of week, time, and whether an incident occurs? Bonus: Is there a relationship between day/time and particular types of incidents?</p>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s">'dayofweek'</span><span class="p">)</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="s">'dayofweek'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># making an hour column that can be grouped on</span>
<span class="n">data</span><span class="p">[</span><span class="s">'hour'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">t</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s">'time'</span><span class="p">]]</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s">'hour'</span><span class="p">)</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="s">'hour'</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="bonus-are-there-any-other-interesting-relationships-in-the-data">Bonus: Are there any other interesting relationships in the data?</h4>

<h1 id="4-geographic-information-systems-gis-">4. Geographic Information Systems (GIS) <a id="gis"></a></h1>

<p>Plot individual incidents in 2017 as points on a map of San Francisco. Does crime seem randomly distributed in space, or do incidents tend to cluster close together? Propose an explanation for your conclusion. Bonus: Shade the points by type of crime.</p>

<p>Hint: Use the <code class="highlighter-rouge">basemap</code> extension to the <code class="highlighter-rouge">matplotlib</code> package!</p>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">twentyeighteen</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s">'year'</span> <span class="o">==</span> <span class="mi">2017</span><span class="p">)</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">twentyeighteen</span><span class="p">[</span><span class="s">'y'</span><span class="p">]</span> <span class="o">=</span> <span class="n">twentyeighteen</span><span class="p">[</span><span class="s">'y'</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s">'float'</span><span class="p">)</span>
<span class="n">twentyeighteen</span><span class="p">[</span><span class="s">'x'</span><span class="p">]</span> <span class="o">=</span> <span class="n">twentyeighteen</span><span class="p">[</span><span class="s">'x'</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s">'float'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mp</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="mf">37.7749</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.4194</span><span class="p">])</span>
<span class="k">for</span> <span class="n">coords</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">twentyeighteen</span><span class="p">[</span><span class="s">'y'</span><span class="p">],</span> <span class="n">twentyeighteen</span><span class="p">[</span><span class="s">'x'</span><span class="p">])):</span>
    <span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
        <span class="n">location</span><span class="o">=</span><span class="n">coords</span>
    <span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">mp</span><span class="p">)</span>
<span class="n">mp</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">folium.plugins</span> <span class="kn">import</span> <span class="n">HeatMap</span>

<span class="n">mp</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="mf">37.7749</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.4194</span><span class="p">])</span>
<span class="n">HeatMap</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">twentyeighteen</span><span class="p">[</span><span class="s">'y'</span><span class="p">],</span> <span class="n">twentyeighteen</span><span class="p">[</span><span class="s">'x'</span><span class="p">])))</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">mp</span><span class="p">)</span>
<span class="n">mp</span>
</code></pre></div></div>

<p>Merge the incidents data with either a Shapefile or GeoJSON file with information on the boundaries of neighborhoods in San Francisco.</p>

<p>The neighborhood data is available here: https://data.sfgov.org/Geographic-Locations-and-Boundaries/Analysis-Neighborhoods/p5b7-5n3h</p>

<p>The API endpoint: https://data.sfgov.org/resource/xfcw-9evu.json</p>

<p>*.geojson</p>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#import requests</span>
<span class="c">#r = requests.get(url='https://data.sfgov.org/resource/xfcw-9evu.json')</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sf_neighborhoods</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">'SF Find Neighborhoods.geojson'</span><span class="p">)</span>
<span class="n">geo_json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">sf_neighborhoods</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">m</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">([</span><span class="mf">37.7749</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.4194</span><span class="p">],</span> <span class="n">zoom_start</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">m</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># might be too big bc won't display</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span>
    <span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="mf">37.7749</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.4194</span><span class="p">],</span> <span class="n">zoom_start</span> <span class="o">=</span> <span class="mi">12</span>
<span class="p">)</span>

<span class="n">folium</span><span class="o">.</span><span class="n">GeoJson</span><span class="p">(</span><span class="n">geo_json_data</span>
<span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="n">m</span>
</code></pre></div></div>

<p>Construct a choropleth map, coloring in each neighborhood by how many incidents it had in 2018. Bonus: Construct several maps that explore differences by day of week, time of year, time of day, etc.</p>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">twentyeighteen</span> <span class="o">=</span> <span class="n">twentyeighteen</span><span class="o">.</span><span class="n">to_df</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="n">gpd</span>
<span class="kn">import</span> <span class="nn">shapely</span>
<span class="n">shapely</span><span class="o">.</span><span class="n">speedups</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">twentyeighteen_spatial_points</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">twentyeighteen</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">'x'</span><span class="p">,</span> <span class="s">'y'</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                       <span class="n">crs</span><span class="o">=</span><span class="p">{</span><span class="s">'init'</span><span class="p">:</span> <span class="s">'epsg:4326'</span><span class="p">},</span>
                       <span class="n">geometry</span><span class="o">=</span><span class="n">twentyeighteen</span><span class="o">.</span><span class="nb">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">shapely</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">Point</span><span class="p">((</span><span class="n">row</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">row</span><span class="o">.</span><span class="n">y</span><span class="p">)),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sf_polygons</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="o">.</span><span class="n">from_features</span><span class="p">(</span><span class="n">geo_json_data</span><span class="p">[</span><span class="s">'features'</span><span class="p">])</span>
<span class="n">sf_polygons</span><span class="o">.</span><span class="n">crs</span> <span class="o">=</span> <span class="p">{</span><span class="s">'init'</span> <span class="p">:</span><span class="s">'epsg:4326'</span><span class="p">}</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sf_spatial</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">sjoin</span><span class="p">(</span><span class="n">sf_polygons</span><span class="p">,</span> <span class="n">twentyeighteen_spatial_points</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">"inner"</span><span class="p">,</span> <span class="n">op</span><span class="o">=</span><span class="s">"intersects"</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">crime_neighborhood</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">sf_spatial</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">crime_neighborhood</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">crime_neighborhood_agg</span> <span class="o">=</span> <span class="n">crime_neighborhood</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'name'</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">crime_neighborhood_agg</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">crime_neighborhood_agg</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">'neighborhood'</span><span class="p">,</span> <span class="s">'crimes'</span><span class="p">]</span>
<span class="n">crime_neighborhood_agg</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div></div>

<p>Do you notice any patters? Are there particular neighborhoods where crime concentrates more heavily?</p>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">m</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span>
    <span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="mf">37.7749</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.4194</span><span class="p">],</span> <span class="n">zoom_start</span> <span class="o">=</span> <span class="mi">12</span>
<span class="p">)</span>

<span class="n">m</span><span class="o">.</span><span class="n">choropleth</span><span class="p">(</span>
    <span class="n">geo_data</span><span class="o">=</span><span class="n">geo_json_data</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">crime_neighborhood_agg</span><span class="p">,</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">'neighborhood'</span><span class="p">,</span> <span class="s">'crimes'</span><span class="p">],</span>
    <span class="n">key_on</span><span class="o">=</span><span class="s">'feature.properties.name'</span><span class="p">,</span>
    <span class="n">fill_color</span><span class="o">=</span><span class="s">'OrRd'</span><span class="p">,</span>
    <span class="n">threshold_scale</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">140</span><span class="p">],</span>
    <span class="n">highlight</span><span class="o">=</span><span class="bp">True</span>
    <span class="p">)</span>

<span class="n">m</span>
</code></pre></div></div>

<h1 id="5-discussion-questions-">5. Discussion Questions <a id="dq"></a></h1>

<p>Based on the evidence from this lab assignment, why do you think “hot spots” policing became more popular in the last few decades? What are the pros and cons to this kind of approach?</p>

<p>What other sorts of data would help improve your analysis?</p>

<div class="language-python input_area highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">append_and_follow</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">link</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Next link (if you want to continue)'</span><span class="p">,</span> <span class="n">link</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">t</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
    <span class="n">js</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">append_and_follow</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Table</span><span class="o">.</span><span class="n">from_records</span><span class="p">(</span><span class="n">js</span><span class="p">[</span><span class="s">'value'</span><span class="p">])),</span> <span class="n">js</span><span class="p">[</span><span class="s">'@odata.nextLink'</span><span class="p">],</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="n">starter</span> <span class="o">=</span> <span class="n">Table</span><span class="p">((</span><span class="s">'__id'</span><span class="p">,</span> <span class="s">'address'</span><span class="p">,</span> <span class="s">'category'</span><span class="p">,</span> <span class="s">'date'</span><span class="p">,</span> <span class="s">'dayofweek'</span><span class="p">,</span> <span class="s">'descript'</span><span class="p">,</span> <span class="s">'incidntnum'</span><span class="p">,</span> 
                 <span class="s">'location'</span><span class="p">,</span> <span class="s">'pddistrict'</span><span class="p">,</span> <span class="s">'pdid'</span><span class="p">,</span> <span class="s">'resolution'</span><span class="p">,</span> <span class="s">'time'</span><span class="p">,</span> <span class="s">'x'</span><span class="p">,</span> <span class="s">'y'</span><span class="p">))</span>
<span class="n">starting_url</span> <span class="o">=</span> <span class="s">'https://data.sfgov.org/api/odata/v4/tmnf-yvry'</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">append_and_follow</span><span class="p">(</span><span class="n">starter</span><span class="p">,</span> <span class="n">starting_url</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">c</span>
</code></pre></div></div>


              <nav class="c-page__nav">
  
    
    <a id="js-page__nav__prev" class="c-page__nav__prev" href="/modules-textbook/legal_studies/1-18.html">
      〈 <span class="u-margin-right-tiny"></span> Intro to Python
    </a>
  

  
    
    <a id="js-page__nav__next" class="c-page__nav__next" href="">
       <span class="u-margin-right-tiny"></span> 〉
    </a>
  
</nav>

            </div>
          </div>
        </div>
      </main>
    </div>

  </body>
</html>
